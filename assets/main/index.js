window.__require=function e(c,t,n){function o(a,r){if(!t[a]){if(!c[a]){var s=a.split("/");if(s=s[s.length-1],!c[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var d=t[a]={exports:{}};c[a][0].call(d.exports,function(e){return o(c[a][1][e]||e)},d,d.exports,e,c,t,n)}return t[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({AD:[function(e,c,t){"use strict";cc._RF.push(c,"9f8c44LV5ZFkJ5ss6Ajxsum","AD"),window.g_dealTime_Video=30,window.g_iScore=100,window.g_iChange_proba=10,window.g_iDie_proba=8,window.g_iPause_proba=5,window.g_iSecond_proba=5,window.g_iBanner_proba=10,window.g_iDieNum=5,window.rank_gameTime="Gametime_BlockPuzzle02",window.rank_bestScore="Gametime_BlockPuzzle02",window.g_AppleID="1439723447",window.sdkManager=e("sdkmanager"),window.g_DealNum=0,window.g_dealNumPlayAD=2,window.g_DF_fullAd_Rand=6,window.g_dealNum_Video=0,window.g_dealNumPlayAD_Video=30,window.g_dealTime_Video=6,window.g_fiveStar=5,window.g_AD={initADManager:function(){this.isMobile()&&(cc.log("\u521d\u59cb\u5316\u5e7f\u544a\u7ba1\u7406\u5668"),sdkManager.init())},resetData:function(){g_DealNum=0},ressetDealNum_Video:function(){g_dealNum_Video=0},playFullAD:function(){this.isMobile()&&(console.log("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u6682\u505c\u5168\u5c4f\u2014\u2014\u2014\u2014\u2014\u2014"),this.resetData(),sdkManager.showFullScreenAD())},getHaveFullScreen:function(){return sdkManager.isFullScreenAvailable()},getHaveRewardVideo:function(){return sdkManager.isRewardVideoAvailable()},getHaveBanner:function(){return sdkManager.isBannerAvailable()},playBannerAD:function(){this.isMobile()&&(console.log("\u2014\u2014banner\u2014\u2014\u2014\u2014\u2014"),console.log("play bannerAD"),console.log("\u64ad\u653ebanner\u5e7f\u544a"),console.log("-----\u64ad\u653ebanner\u5e7f\u544a-----1"),sdkManager.showBanner())},hideBannerAD:function(){this.isMobile()&&(console.log("--HideBanner--"),sdkManager.hideBanner())},cacheRewardVideoAD:function(){this.isMobile()&&sdkManager.cacheRewardVideoAD()},playRewardVideoAD:function(){return console.log("Asdsdaddadsakj588778787"),!!this.isMobile()&&(sdkManager.isRewardVideoAvailable()?(console.log("play videoAD"),console.log("\u64ad\u653e\u89c6\u9891\u5e7f\u544a"),sdkManager.showRewardVideoAD(),!0):(console.log("\u672a\u6709\u89c6\u9891\u5e7f\u544a"),this.cacheRewardVideoAD(),!1))},isCanPlayFullAD:function(){if(g_DealNum>=g_dealNumPlayAD&&10*Math.random()<g_DF_fullAd_Rand)return!0;return!1},isCanPlayVideo:function(){return g_dealNum_Video>=g_dealNumPlayAD_Video},isMobile:function(){return!!cc.sys.isMobile},playBanner:function(){this.isMobile()&&(console.log("\u6b7b\u4ea1\u6b21\u6570\u2014\u2014\u5168\u5c4f\u2014\u2014\u2014\u2014\u2014\u2014  "+g_DealNum),this.resetData(),sdkManager.showBanner())},bindCallBack:function(e,c){this.isMobile()&&sdkManager.setCallback(e,c)}},cc._RF.pop()},{sdkmanager:"sdkmanager"}],AudioMgr:[function(e,c,t){"use strict";cc._RF.push(c,"18c38HcrpVEK4mCLMOmH/5s","AudioMgr");var n={playOnloadEffect:function(){window.isMaJia||cc.loader.loadRes("Audio/Main_voice",cc.AudioClip,function(e,c){cc.vv.AudioMgr.playBG=cc.audioEngine.play(c,!0,cc.vv.AudioMgr.VolIndex)})},playDrop1:function(e){e&&cc.loader.loadRes("Audio/Place_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playDrop2:function(e){e&&cc.loader.loadRes("Audio/Cancel_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playKeySound:function(e){e&&cc.loader.loadRes("Audio/Keytone_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playChoose:function(e){e&&cc.loader.loadRes("Audio/Choose_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playElimi:function(e){e&&cc.loader.loadRes("Audio/Eliminate_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playDie:function(e){e&&cc.loader.loadRes("Audio/Death_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playCrown:function(e){e&&cc.loader.loadRes("Audio/Score_sound",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playShua:function(e){e&&cc.loader.loadRes("Audio/PlayShua",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playFlashScreen:function(e){e&&cc.loader.loadRes("Audio/PlayFlashScreen",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})},playRecord:function(e){e&&cc.loader.loadRes("Audio/record",cc.AudioClip,function(e,c){return cc.audioEngine.play(c,!1,cc.vv.AudioMgr.VolIndex)})}};c.exports=n,cc._RF.pop()},{}],BornPoint:[function(e,c,t){"use strict";cc._RF.push(c,"38fd9TvQOxHAKoIrxsqCQjn","BornPoint");var n=[[cc.v3(-190,-415)],[cc.v3(0,-415)],[cc.v3(190,-415)]];cc.Class({extends:cc.Component,properties:{PreArea:cc.Prefab},deviationIndex:function(){return[[null],[null],[0,-38],[-38,38],[null],[-38,-38],[0,-38],[0,38],[0,-38],[0,38],[null],[76,76],[null],[38,0],[null],[-38,0],[0,-38],[-38,0],[-38,38]]},loadArea:function(){0==this.node.childrenCount?this.RandomShape():cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").checkIsLose()},RandomShape:function(e){for(var c=0;c<3;c++){var t=cc.instantiate(this.PreArea);t.parent=this.node,t.x=n[c][0].x,t.y=n[c][0].y,t.selfTag=c,t.zIndex=0,t.setScale(0),t.children[0].zIndex=10;var o=this.deviationIndex()[parseInt(t.children[1].name)];null!=o[0]&&(t.children[1].x+=.45*o[0],t.children[1].y+=.45*o[1]),t.children[1].name="shape"}this.scheduleOnce(function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").checkIsLose()},.1),cc.vv.gamelogic.canCreate||null==cc.vv.gamelogic.canCreate||5==e?(cc.vv.gamelogic.canCreate=!1,this.node.children[0].runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut(.1))),this.node.children[1].runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut(.1))),this.node.children[2].runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut(.1)))):this.RandomShape()},LoadHelpShape:function(){var e=cc.instantiate(this.PreArea);e.parent=this.node;var c=n[1][0];e.x=c.x,e.y=c.y;var t=this.deviationIndex()[parseInt(e.children[1].name)];null!=t[0]&&(e.children[1].x+=.45*t[0],e.children[1].y+=.45*t[1]),e.children[1].name="shape",e.selfTag=i,e.zIndex=0,e.setScale(0,0),cc.vv.gamelogic.JumpIn(e)}}),cc._RF.pop()},{}],DataMgr:[function(e,c,t){"use strict";cc._RF.push(c,"30d25lrW2dMRrRWwJVqqtSK","DataMgr"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],GameCenter:[function(e,c,t){"use strict";cc._RF.push(c,"c5975IrPtJGIr309PfmUKd4","GameCenter"),window.mylog=console.log;var n={ads:{},fiveStar:function(){cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("gameCenter","FiveStar")},loadGameCenter:function(){cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("gameCenter","LoadingGameCenter")},gameCenter:function(e,c){cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("gameCenter","GameCenter:forCategory:",e,c)},openGameCenter:function(){cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("gameCenter","OpenGameCenter")},gameAchievement:function(e,c){cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("gameCenter","Achievement:percentComplete:",e,c)},init:function(){if(!cc.sys.isMobile)return!1;this.loadGameCenter()}};c.exports=n,cc._RF.pop()},{}],IronSource:[function(e,c,t){"use strict";cc._RF.push(c,"1594eH4OihJ9Ja7mADELngS","IronSource"),Object.defineProperty(t,"__esModule",{value:!0}),t.interstitialHandler=t.rewardHandler=void 0;var n=function(){return function(e,c,t,n){void 0===c&&(c=function(){}),void 0===t&&(t=function(){}),void 0===n&&(n=function(){}),this.rewardCb=e,this.noRewardCb=c,this.disPlayCb=t,this.failedCb=n}}();t.rewardHandler=n;var o=function(){return function(e,c){void 0===e&&(e=function(){}),void 0===c&&(c=function(){}),this.disMissCb=e,this.disPlayCb=c}}();t.interstitialHandler=o;var i=function(){function e(){}return e.prototype.init=function(){cc.log("IronSource init"),this.cacheFullScreenAD(),this.cacheRewardVideoAD(),this.cacheBannerAD()},e.prototype.setRewardHandler=function(e,c,t,o){this.rewardHandler=new n(e,c,t,o)},e.prototype.setInterstitialHandler=function(e,c){this.interstitialHandler=new o(e,c)},e.prototype.handle=function(e){cc.log(e);var c=JSON.parse(e);switch(c.eventID){case"AD_RV":"RV_Close"==c.eventData.rewardEventID?"success"==c.eventData.rewardEventData?this.rewardHandler.rewardCb():this.rewardHandler.noRewardCb&&this.rewardHandler.noRewardCb():"RV_Open"==c.eventData.rewardEventID&&(this.rewardHandler.disPlayCb(),this.rewardHandler.noRewardCb&&this.rewardHandler.noRewardCb());break;case"FULL":"FULL_Open"==c.eventData.fullEventID?this.interstitialHandler.disPlayCb():"FULL_Close"==c.eventData.fullEventID?this.interstitialHandler.disMissCb():c.eventData.fullEventID;break;case"BANNER":"BANNER_Open"==c.eventData.bannerEventID||c.eventData.bannerEventID}},e.prototype.cacheFullScreenAD=function(){jsb.reflection.callStaticMethod("ProxyAD","loadInterstitial")},e.prototype.cacheRewardVideoAD=function(){},e.prototype.cacheBannerAD=function(){},e.prototype.showFullScreenAD=function(){this.isFullScreenAvailable()&&jsb.reflection.callStaticMethod("ProxyAD","showInterstitial")},e.prototype.showRewardVideoAD=function(){this.isRewardVideoAvailable()?jsb.reflection.callStaticMethod("ProxyAD","showRewardedVideo"):this.rewardHandler.failedCb()},e.prototype.showBanner=function(){jsb.reflection.callStaticMethod("ProxyAD","showBanner")},e.prototype.hideBanner=function(){jsb.reflection.callStaticMethod("ProxyAD","hideBanner")},e.prototype.isBannerAvailable=function(){return!0},e.prototype.isFullScreenAvailable=function(){return jsb.reflection.callStaticMethod("ProxyAD","isInterstitialAvailable")},e.prototype.isRewardVideoAvailable=function(){return jsb.reflection.callStaticMethod("ProxyAD","isRewardedVideoAvailable")},e}();t.default=i,window.IronSource=new i,cc._RF.pop()},{}],Prompt:[function(e,c,t){"use strict";cc._RF.push(c,"e7152SHjK1DTbr04Y6G9e1I","Prompt"),cc.Class({extends:cc.Component,properties:{PromptNum:{type:cc.SpriteFrame,default:[]},PromptAltas:{type:cc.SpriteAtlas,default:null},wordsAltas:{type:cc.SpriteAtlas,default:null}},onShowScore:function(e,c,t){var n=this.node.getChildByName("num"),o=this.node.getChildByName("words"),i="",a="",r="",s=null;switch(e){case 10:r="10_";break;case 20:r="20_",s="combo1_"+this.getRandom(1,2);break;case 30:r="60_",s="combo2_"+this.getRandom(1,3);break;case 40:r="100_",s="combo3_"+this.getRandom(1,2);break;case 50:r="200_",s="combo4_"+this.getRandom(1,2)}switch(e>=20&&cc.find("UI_ROOT/Canvas/UI/rock/main/ground").getComponent(cc.Animation).play("shake"),t){case 0:i=r+"5",a=s+"_5";break;case 1:i=r+"1";this.getRandom(1,2);a=s+"_1";break;case 2:i=r+"3";this.getRandom(1,2);a=s+"_3";break;case 3:i=r+"4";this.getRandom(1,2);a=s+"_4";break;case 4:i=r+"2";this.getRandom(1,3);a=s+"_2"}cc.loader.loadRes("UIScore/"+i,cc.SpriteFrame,function(e,c){n.getComponent(cc.Sprite).spriteFrame=c}),n.active=!0,n.opacity=255,n.getComponent(cc.Animation).play("AddnumBig"),n.getComponent(cc.Animation).on("finished",function(){n.active=!1},this),null!=s&&(cc.loader.loadRes("UIWord/"+a,cc.SpriteFrame,function(e,c){o.getComponent(cc.Sprite).spriteFrame=c}),o.opacity=255,o.active=!0,o.getComponent(cc.Animation).play("AddnumWordBig"),o.getComponent(cc.Animation).on("finished",function(){o.active=!1},this))},getRandom:function(e,c){return Math.floor(Math.random()*(c-e+1)+e)}}),cc._RF.pop()},{}],ProxyAnalys:[function(e,c,t){"use strict";cc._RF.push(c,"cb7e8oVpEhCfbGSU6Dg2jNU","ProxyAnalys");var n={getDeviceId:function(){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("ProxyAnalys","getDeviceId")},__fireEvent__:function(e,c){if(cc.sys.os==cc.sys.OS_IOS){var t=JSON.stringify(c);console.log("3333 >>>> "+e+"  >>>> "+t),jsb.reflection.callStaticMethod("ProxyAnalys","fireEvent:keyParamJsonStr:",e,t)}},__SendPurchaseEvent:function(e,c,t,n){console.log("2222 >>>> "+e+"  >>>> "+c+" >>>>"+t+" >>>>"+n);var o=new Object;o.productId=e,o.contentType=c,o.revenue=t,o.currency=n,console.log(">>>> "+o.productId+">>>>"+o.contentType+">>>>>"+o.revenue),this.__fireEvent__("purchase",o)},__SendRateEvent:function(e,c,t,n){var o=new Object;o.productId=e,o.contentType=c,o.ratingValue=t,o.maxRatingValue=n,this.__fireEvent__("rate",o)},SendPurchaseEvent:function(e,c,t,n){console.log("1111 >>>> "+e+"  >>>> "+c+" >>>>"+t+" >>>>"+n),t=Math.floor(100*t)/100,n="USD",this.__SendPurchaseEvent(e,c,t,n)},createKeyParamDic:function(e,c,t,n){var o=new Object;return o.id=e,o.contentType=c,o.revenue=t,o.currency=n,o}};c.exports=n,cc._RF.pop()},{}],board:[function(e,c,t){"use strict";var n;cc._RF.push(c,"b94f1tRI7xMkrmJOgfHzhQ6","board"),cc.Class({extends:cc.Component,properties:(n={},n.RowNum=0,n.ColNum=0,n.singleBlockWidth=80,n.preBlock={default:null,type:cc.Prefab},n),initLogicBoard:function(){for(var e=[],c=this.RowNum,t=0;t<c;t++){e.push({count:8})}var n=[];for(t=0;t<c;t++)for(var o=e[t].count,i=0;i<o;i++){var a=i*this.singleBlockWidth-266,r=266-t*this.singleBlockWidth,s=cc.v3(a,r);n.push(s)}for(t=0;t<n.length;t++){var l=cc.instantiate(this.preBlock);l.x=n[t].x,l.y=n[t].y,l.parent=this.node}cc.vv.DataMgr.LogicBoard=this.node},delete:function(e){this.colorcount=0,this.nodeCount=0,this.deleData=e,this.RemoveNode()},RemoveNode:function(){for(var e=0;e<this.deleData.length;e++){var c=this.deleData[e],t=cc.vv.DataMgr.LogicBoard.children[c],n=t.getChildByName("singleBlock");n&&(t.isHaveFK=!1,n.removeFromParent())}},Reset:function(){if(this.node){for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].getChildByName("singleBlock")&&(this.node.children[e].getChildByName("singleBlock").destroy(),this.node.children[e].isHaveFK=null);cc.sys.garbageCollect()}},checkIsLose:function(){if(1!=cc.vv.gamelogic.isDeleting){for(var e=0,c=cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint"),t=0;t<c.childrenCount;t++){i="shape"==(o=c.children[t]).children[1].name?o.children[1]:o.children[0],(n=o.getComponent("shape")).checkIsLose()?(e++,i.opacity=100,n.showBombAction()):(i.opacity=255,n.closeBombAction())}if(this.countNum=0,e==c.childrenCount){if(c.childrenCount>0)for(t=0;t<c.childrenCount;t++){255==(i="shape"==(o=c.children[t]).children[1].name?o.children[1]:o.children[0]).opacity&&(i.opacity=100),100==i.opacity&&this.countNum++}cc.find("UI_ROOT/Canvas/UI/rock/Layer").active=!0;c=cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint");if(this.countNum==c.childrenCount){cc.log("5>>"),cc.vv.gamelogic.canCreate=!1,cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001;for(t=0;t<c.childrenCount;t++){var n;(n=(o=c.children[t]).getComponent("shape")).closeBombAction()}this.scheduleOnce(function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").defeate()},.5)}else for(t=0;t<c.childrenCount;t++){var o,i;255==(i="shape"==(o=c.children[t]).children[1].name?o.children[1]:o.children[0]).opacity&&(i.opacity=100)}}else cc.vv.gamelogic.canCreate=!0}}}),cc._RF.pop()},{}],buttom:[function(e,c,t){"use strict";var n;cc._RF.push(c,"7b4b4luZw1DdqbT2s61qAXm","buttom"),cc.Class({extends:cc.Component,properties:(n={singleNode:{type:cc.Prefab,default:null},singleBlockWidth:76},n.RowNum=0,n.ColNum=0,n.sp=cc.SpriteFrame,n),loadMap:function(){return[[7],[6,15],[5,14,23],[4,13,22,31],[3,12,21,30,39],[2,11,20,29,38,47],[1,10,19,28,37,46,55],[0,9,18,27,36,45,54,63],[8,17,26,35,44,53,62],[16,25,34,43,52,61],[24,33,42,51,60],[32,41,50,59],[40,49,58],[48,57],[56]]},init:function(){this.LoadButtom()},LoadAni:function(){cc.vv.AudioMgr.playFlashScreen(window.isOpenVoice),this.SceAniCount=0,this.ButtomArr=this.loadMap(),this.schedule(this.SceAni,.03,this.ButtomArr.length,0)},SetAniOver:function(){return this.OverAni},SceAni:function(){if(this.SceAniCount>14){this.unschedule(this.SceAni);var e=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board");e.active=!0,e.opacity=0;var c=cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint");return 11!=cc.vv.gamelogic.isHelpToPlay&&12!=cc.vv.gamelogic.isHelpToPlay&&13!=cc.vv.gamelogic.isHelpToPlay&&c.RandomShape(5),cc.vv.gamelogic.isLoadAni=!0,this.OverAni=!0,void this.scheduleOnce(function(){this.OverAni=!1},1)}for(var t=0;t<this.ButtomArr[this.SceAniCount].length;t++)this.node.children[this.ButtomArr[this.SceAniCount][t]]&&(this.node.children[this.ButtomArr[this.SceAniCount][t]].active=!0,this.node.children[this.ButtomArr[this.SceAniCount][t]].opacity=255);this.SceAniCount+=1},LoadButtom:function(){for(var e=[],c=this.ColNum,t=0;t<c;t++){var n={count:8,srcPos:cc.v3(0,0)};e.push(n)}var o=[];for(t=0;t<c;t++)for(var i=e[t].count,a=0;a<i;a++){var r=a*this.singleBlockWidth-266,s=272-t*this.singleBlockWidth,l=cc.v3(r,s);o.push(l)}for(t=0;t<o.length;t++){var d=cc.instantiate(this.singleNode);d.zIndex=-10,d.x=o[t].x,d.y=o[t].y,d.active=!1,d.parent=this.node}cc.vv.DataMgr.buttom=this.node},Reset:function(){if(cc.vv.gamelogic.isLoadAni=!1,this.node){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").active=!1;for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].destroy();cc.sys.garbageCollect(),console.log("BBBB")}},OnRewardVideoClick:function(){g_AD.bindCallBack(this.callback_video.bind(this)),g_AD.playRewardVideoAD()},OnFullVideoClick:function(){},OnBannerVidoeClick:function(){g_AD.bindCallBack(this.callback_video.bind(this)),g_AD.playBannerAD()},callback_video:function(e,c){}}),cc._RF.pop()},{}],button:[function(e,c,t){"use strict";cc._RF.push(c,"058c5Gc9FBOmLuQRRzDFAOI","button"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.checkd=!1},onClicked:function(){cc.vv.AudioMgr.PlayClick(),this.node.checkd=!this.node.checkd}}),cc._RF.pop()},{}],controlBox:[function(e,c,t){"use strict";cc._RF.push(c,"3adf7wkrzpLPoo0wgwlQTtv","controlBox"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("./planOne"),o=e("./cubePile"),i=e("./gameManage"),a=e("../loadManage"),r=cc._decorator,s=r.ccclass,l=r.property,d=function(e){function c(){var c=null!==e&&e.apply(this,arguments)||this;return c.score=null,c.score2=null,c.planOne=null,c.cubPile=null,c.planContent=null,c.leftCubPileContent=null,c.rightCubPileContent=null,c.bottomCubPileContent=null,c.bottomCubPileContent2=null,c.controlCubPileContent=null,c.cubContent=null,c.planArrArr={},c.cubPileArr=[],c.planArr=[],c.curDR=null,c.H=8,c.V=13,c.scoreNum=0,c.gameOver=null,c.resultScore=null,c.resultBestScore=null,c.allCubCount=0,c.hasTip=!1,c.colorArr=["box-01-01","box-02-01","box-03-01","box-04-01","box-05-01"],c.colorSpriteArr=[],c}return __extends(c,e),c.prototype.onLoad=function(){this.resize(),i.default.controlBox=this},c.prototype.resize=function(){var e=this.node.getComponentsInChildren(cc.Canvas)[0];if(e&&!e.___HasAdaptation){e.___HasAdaptation=!0,this.curDR||(this.curDR=e.designResolution);var c=this.curDR,t=cc.view.getFrameSize(),n=t.width,o=t.height,i=n,a=o;n/o>c.width/c.height?i=(a=c.height)*n/o:a=o/n*(i=c.width),e.designResolution=cc.size(i,a),e.node.width=i,e.node.height=a}},c.prototype.start=function(){var e=this;this.creatorMap(),this.startGame(),this.colorArr.forEach(function(c){a.default.loadRes("textrue/BoxPic/"+c,cc.SpriteFrame,function(c){e.colorSpriteArr.push(c)})})},c.prototype.startGame=function(){this.cubPileArr=[],this.scoreNum=0,this.allCubCount=0,this.refreshScore(),this.creatorCubPile()},c.prototype.refreshScore=function(){this.score.string=this.score2.string="Score:"+this.scoreNum},c.prototype.creatorMap=function(){for(var e=0;e<this.H;e++)for(var c=0;c<this.V;c++){var t=cc.instantiate(this.planOne),o=t.getComponent(n.default);this.planContent.addChild(t),this.planArrArr[e]||(this.planArrArr[e]={}),this.planArrArr[e][c]=o,this.planArr.push(o),t.x=76*(e-(this.H-1)/2),t.y=76*(c-(this.V-1)/2),o.init(e,c)}},c.prototype.creatorCubPile=function(){this.creatorCubPileOne(this.leftCubPileContent),this.creatorCubPileOne(this.rightCubPileContent),this.creatorCubPileOne(this.bottomCubPileContent),this.creatorCubPileOne(this.bottomCubPileContent2)},c.prototype.creatorCubPileOne=function(e){for(var c=e.childrenCount,t=0;t<c;t++){var n=cc.instantiate(this.cubPile),i=n.getComponent(o.default);e.children[t].removeAllChildren(),e.children[t].addChild(n),i.init(),this.cubPileArr.push(i)}},c.prototype.checkDie=function(){if(this.hasTip=!1,this.cubPileArr.length<=0)return this.showResult(),!0;var e=this.planArr.filter(function(e){if(null==e.hasCub)return e}),c=!0;this.allCubCount=this.planArr.length-e.length;for(var t=0;t<this.cubPileArr.length;t++){this.cubPileArr[t].checkCanPlaceOnWait(e)?c=!1:this.cubPileArr[t].setGray()}return c&&this.showResult(),c},c.prototype.removeCubPilce=function(e){var c=this.cubPileArr.indexOf(e);c>-1?this.cubPileArr.splice(c,1):cc.error("\u600e\u4e48\u56de\u4e8b")},c.prototype.showResult=function(){var e=this;cc.log("\u7ed3\u675f\u4e86"),this.cubPileArr.forEach(function(e){e.setGray()}),this.scheduleOnce(function(){e.destroyAllCub(function(){e.cubPileArr.forEach(function(e){e.onDie()}),e.cubPileArr=[],e.scheduleOnce(function(){e.showGameOver()},.5);var c=Math.max(Number(cc.sys.localStorage.getItem("majia_bestScore")),e.scoreNum);cc.sys.localStorage.setItem("majia_bestScore",c)})},1)},c.prototype.destroyAllCub=function(e){var c=this;if(0!=this.allCubCount)for(var t=0,n=0;n<this.H;n++)for(var o=function(o){var a=i.planArrArr[n][o];null!=a.hasCub&&a.hasCub.node.runAction(cc.sequence(cc.delayTime(i.getDistance(cc.Vec2.ZERO,a.node.position)/500),cc.scaleTo(.5,.3).easing(cc.easeBackInOut()),cc.callFunc(function(){a.hasCub.node.destroy(),a.hasCub=null,c.scoreNum+=5,c.refreshScore(),++t==c.allCubCount&&e()})))},i=this,a=0;a<this.V;a++)o(a);else e()},c.prototype.getDistance=function(e,c){return e.sub(c).mag()},c.prototype.showGameOver=function(){this.gameOver.active=!0,this.resultScore.string=this.scoreNum.toString(),this.resultBestScore.string=cc.sys.localStorage.getItem("majia_bestScore")},c.prototype.clickEvent=function(e){var c=this;switch(e.currentTarget.name){case"home":this.gameOver.active?(this.gameOver.active=!1,cc.director.loadScene("game")):cc.director.loadScene("game");break;case"restar":this.gameOver.active?(this.gameOver.active=!1,this.startGame()):this.destroyAllCub(function(){c.startGame()})}},__decorate([l(cc.Label)],c.prototype,"score",void 0),__decorate([l(cc.Label)],c.prototype,"score2",void 0),__decorate([l(cc.Prefab)],c.prototype,"planOne",void 0),__decorate([l(cc.Prefab)],c.prototype,"cubPile",void 0),__decorate([l(cc.Node)],c.prototype,"planContent",void 0),__decorate([l(cc.Node)],c.prototype,"leftCubPileContent",void 0),__decorate([l(cc.Node)],c.prototype,"rightCubPileContent",void 0),__decorate([l(cc.Node)],c.prototype,"bottomCubPileContent",void 0),__decorate([l(cc.Node)],c.prototype,"bottomCubPileContent2",void 0),__decorate([l(cc.Node)],c.prototype,"controlCubPileContent",void 0),__decorate([l(cc.Node)],c.prototype,"cubContent",void 0),__decorate([l(cc.Node)],c.prototype,"gameOver",void 0),__decorate([l(cc.Label)],c.prototype,"resultScore",void 0),__decorate([l(cc.Label)],c.prototype,"resultBestScore",void 0),c=__decorate([s],c)}(cc.Component);t.default=d,cc._RF.pop()},{"../loadManage":"loadManage","./cubePile":"cubePile","./gameManage":"gameManage","./planOne":"planOne"}],cubeOne:[function(e,c,t){"use strict";cc._RF.push(c,"2e9600wtqFEGYnuxHtX3XaW","cubeOne"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("./gameManage"),o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function c(){return null!==e&&e.apply(this,arguments)||this}return __extends(c,e),c.prototype.init=function(e){this.node.getComponent(cc.Sprite).spriteFrame=e},c.prototype.onPlace=function(e){var c=this,t=this.node.parent.convertToNodeSpaceAR(e),o=n.default.controlBox.cubContent.convertToNodeSpaceAR(e);this.node.runAction(cc.sequence(cc.moveTo(.25,t),cc.callFunc(function(){c.node.parent=n.default.controlBox.cubContent,c.node.position=o})))},c=__decorate([i],c)}(cc.Component));t.default=a,cc._RF.pop()},{"./gameManage":"gameManage"}],cubePile:[function(e,c,t){"use strict";cc._RF.push(c,"a36b0LM5dpFpJFBpHL3kx8+","cubePile"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("../loadManage"),o=e("./gameManage"),i=e("./cubeOne"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function c(){var c=null!==e&&e.apply(this,arguments)||this;return c.allCount=16,c.initP=null,c.initParent=null,c.newCubPile=null,c.initScale=.8,c.arrPlanOne=[],c.arrV2=[],c.grayImg=null,c.colorImg=null,c}return __extends(c,e),c.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(c){switch(c.label){case 0:return this.initP=this.node.position,this.initParent=this.node.parent,this.node.scale=this.initScale,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchCancel,this),[4,this.addCubPile()];case 1:return c.sent(),this.initArrV2(),n.default.loadRes("textrue/BoxPic/gray",cc.SpriteFrame,function(c){e.grayImg=c}),[2]}})})},c.prototype.initArrV2=function(){for(var e=this.newCubPile.children[0],c=1;c<this.newCubPile.childrenCount;c++){var t=this.newCubPile.children[c],n=t.x-e.x,o=t.y-e.y,i=cc.v2(n,o).rotateSelf(this.newCubPile.angle/180*Math.PI);this.arrV2.push(i)}},c.prototype.addCubPile=function(){return __awaiter(this,void 0,void 0,function(){var e,c,t,a=this;return __generator(this,function(r){switch(r.label){case 0:return e=Math.ceil(Math.random()*this.allCount),[4,n.default.loadPrefabStic("majia/shape/"+e)];case 1:return c=r.sent(),this.newCubPile=cc.instantiate(c),t=[0,90,180,270][Math.floor(4*Math.random())],this.newCubPile.angle=t,this.colorImg=o.default.controlBox.colorSpriteArr[Math.floor(Math.random()*o.default.controlBox.colorSpriteArr.length)],this.newCubPile.children.forEach(function(e){e.addComponent(i.default),e.getComponent(i.default).init(a.colorImg)}),this.node.addChild(this.newCubPile),[2]}})})},c.prototype.onTouchStart=function(e){cc.vv.AudioMgr.playKeySound(window.isOpenVoice);var c=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.node.parent=o.default.controlBox.controlCubPileContent,this.node.position=o.default.controlBox.controlCubPileContent.convertToNodeSpaceAR(c),this.node.scale=1,this.onDrag(e)},c.prototype.onDrag=function(e){var c=this,t=this.node.parent.convertToNodeSpaceAR(e.getLocation());t.y+=200,this.node.position=t,this.arrPlanOne.forEach(function(e){e.onUnTip()}),this.checkCanPlace()&&this.arrPlanOne.forEach(function(e){e.onTip(c.colorImg)})},c.prototype.onTouchCancel=function(e){if(this.arrPlanOne.forEach(function(e){e.onUnTip()}),this.arrPlanOne.length==this.newCubPile.childrenCount){cc.vv.AudioMgr.playDrop1(window.isOpenVoice);for(var c=0;c<this.newCubPile.childrenCount;c++){var t=this.newCubPile.children[c].getComponent(i.default),n=this.arrPlanOne[c],a=n.worldP;t.onPlace(a),n.hasCub=t}o.default.controlBox.removeCubPilce(this),o.default.controlBox.checkDie(),o.default.controlBox.scoreNum+=5,o.default.controlBox.refreshScore()}else cc.vv.AudioMgr.playDrop2(window.isOpenVoice),this.node.parent=this.initParent,this.node.position=cc.Vec2.ZERO,this.node.scale=this.initScale},c.prototype.checkCanPlace=function(){this.arrPlanOne=[];for(var e=o.default.controlBox.planArr,c=0;c<this.newCubPile.childrenCount;c++){for(var t=this.newCubPile.children[c].convertToWorldSpaceAR(cc.Vec2.ZERO),n=!1,i=0;i<e.length;i++)if(n=e[i].checkPosIsOk(t)){this.arrPlanOne.push(e[i]);break}if(!n)return!1}return!0},c.prototype.checkCanPlaceOnWait=function(e){for(var c=function(c){var n=e[c],o=!0,i=[];i.push(n);for(var a=function(c){var a=t.arrV2[c].x,r=t.arrV2[c].y,s=e.find(function(e){var c=Math.abs(e.worldP.x-.6*a-n.worldP.x)<1,t=Math.abs(e.worldP.y-.6*r-n.worldP.y)<1;return c&&t});if(null==s)return o=!1,"break";i.push(s)},r=0;r<t.arrV2.length;r++){if("break"===a(r))break}if(o)return{value:!0}},t=this,n=0;n<e.length;n++){var o=c(n);if("object"==typeof o)return o.value}return!1},c.prototype.setGray=function(){var e=this;this.newCubPile.getComponentsInChildren(cc.Sprite).forEach(function(c){c.spriteFrame=e.grayImg})},c.prototype.onDie=function(){this.node.removeFromParent(),this.node.destroy()},c=__decorate([r],c)}(cc.Component));t.default=s,cc._RF.pop()},{"../loadManage":"loadManage","./cubeOne":"cubeOne","./gameManage":"gameManage"}],effects:[function(e,c,t){"use strict";var n;cc._RF.push(c,"1a91fRPcBBCf7LRkiV8cgUn","effects"),cc.Class({extends:cc.Component,properties:(n={},n.RowNum=0,n.ColNum=0,n.singleBlockWidth=76,n.BlockEffect=cc.Prefab,n.BlockColor={default:[],type:cc.SpriteFrame},n.DealColor={default:[],type:cc.SpriteFrame},n),onLoad:function(){this.count1Tag=0,this.count2Tag=0,this.countPaly=0},initEffectBoard:function(){for(var e=[],c=this.ColNum,t=0;t<c;t++){var n={count:8,startPos:cc.v3(0,0)};e.push(n)}var o=[];for(t=0;t<c;t++)for(var i=e[t].count,a=0;a<i;a++){var r=cc.v3(a*this.singleBlockWidth-266,266-t*this.singleBlockWidth);o.push(r)}for(t=0;t<o.length;t++){var s=cc.instantiate(this.BlockEffect);s.x=o[t].x,s.y=o[t].y,s.getChildByName("shadow").active=!1,s.zIndex=0,s.parent=this.node}cc.vv.DataMgr.EffectBoard=this.node},MoveColorDeal:function(e,c,t){for(var n=cc.vv.DataMgr.EffectBoard,o=0;o<n.childrenCount;o++)"1"==n.children[o].id?n.children[o].getChildByName("shadow").active=!0:n.children[o].getChildByName("shadow").active=!1;if(!e){for(o=0;o<n.childrenCount;o++)for(var i=0;i<c.length;i++)n.children[o].x==c[i].x&&n.children[o].y==c[i].y&&(n.children[o].getChildByName("shadow").getComponent(cc.Sprite).spriteFrame=this.DealColor[t],n.children[o].getChildByName("shadow").active=!0);return cc.vv.gamelogic.MoveChangeColor(t,c)}this.returnDealColAndRow(null,null)},MoveDealColAndRow:function(e,c){for(var t=0;t<c.length;t++){var n=cc.vv.DataMgr.EffectBoard.children[c[t]].getChildByName("frame");n.active=!0,n.getChildByName("kuang").active=!1,n.getComponent(cc.Sprite).spriteFrame=this.BlockColor[e],n.opacity=255}},returnDealColAndRow:function(e,c){if(e){for(var t=0;t<e.length;t++)if(null!=e[t]){var n=cc.vv.DataMgr.EffectBoard.children[e[t]].getChildByName("frame");n.active&&(n.active=!1)}}else if(null==e&&null==c)for(t=0;t<cc.vv.DataMgr.EffectBoard.childrenCount;t++){cc.vv.DataMgr.EffectBoard.children[t].getChildByName("frame").active=!1}},DropDownCorol:function(e,c){e=e;for(var t=c,n=cc.vv.DataMgr.EffectBoard,o=cc.vv.DataMgr.LogicBoard,i=0;i<n.childrenCount;i++)for(var a=0;a<t.length;a++)if(n.children[i].x==t[a].x&&n.children[i].y==t[a].y){var r=n.children[i].getChildByName("body").getChildByName("Xianshi");r.getComponent(cc.Animation),r.getComponent(cc.Sprite).spriteFrame=this.BlockColor[e],r.active=!0,r.opacity=255,r.colorid=e,n.children[i].getChildByName("Expl").colorid=e,n.children[i].getChildByName("body").getChildByName("Xianshi").getComponent(cc.Animation).play("bodyDropDwon"),n.children[i].id="1",o.children[i].id="1"}return!0},DeleteDeal:function(e,c,t){this.CIndex=t,this.ClearOff=e,this.FadeOutCount=0;for(var n=cc.vv.DataMgr.EffectBoard,o=0;o<c.length;o++){var i=c[o];n.children[i].getChildByName("frame").getComponent(cc.Sprite).spriteFrame=null,n.children[i].getChildByName("shadow").active=!1,n.children[i].id="0",n.children[i].getChildByName("body").getChildByName("Xianshi").getComponent(cc.Sprite).spriteFrame=null,n.children[i].getChildByName("body").getChildByName("Xiaochu").getComponent(cc.Sprite).spriteFrame=this.BlockColor[this.CIndex],n.children[i].getChildByName("body").getChildByName("Xiaochu").opacity=255}this.schedule(this.FadeOutEffect,.05,this.ClearOff.length,0),this.CanPlay=!0},GameResetDeal:function(e,c){this.FadeOutCount=0,this.ClearOff=e;for(var t=cc.vv.DataMgr.EffectBoard,n=0;n<e.length;n++){var o=e[n];t.children[o].getChildByName("frame").getComponent(cc.Sprite).spriteFrame=null,t.children[o].getChildByName("shadow").active=!1,t.children[o].id="0",t.children[o].getChildByName("body").getChildByName("Xianshi").getComponent(cc.Sprite).spriteFrame=null,t.children[o].getChildByName("body").getChildByName("Xiaochu").getComponent(cc.Sprite).spriteFrame=this.BlockColor[c],t.children[o].getChildByName("body").getChildByName("Xiaochu").opacity=255}this.schedule(this.ResetFadeOutEffect,.005,e.length,0),this.CanPlay=!0},ResetFadeOutEffect:function(){if(this.FadeOutCount==this.ClearOff.length)return cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").checkIsLose(),cc.find("UI_ROOT/Canvas/UI/rock/Layer").active=!1,void(this.FadeOutCount=0);cc.vv.DataMgr.EffectBoard.children[this.ClearOff[this.FadeOutCount]].getChildByName("body").getChildByName("Xiaochu").runAction(cc.sequence(cc.scaleTo(.2,.8),cc.scaleTo(.2,1.2),cc.fadeOut(.3))),this.FadeOutCount+=1},update:function(e){1==this.CanPlay&&(this.CanPlay=!1,this.count1Tag<3&&this.count1Tag>0&&1!=this.play2?(cc.vv.AudioMgr.playElimi(window.isOpenVoice),this.play2=!0):this.count2Tag>0&&this.count2Tag<2?(this.count1Tag=0,this.count2Tag=0,this.play2=!1,this.play3=!0,cc.vv.AudioMgr.playElimi(window.isOpenVoice)):0==this.count1Tag&&(cc.vv.AudioMgr.playElimi(window.isOpenVoice),this.play2=!1,this.play3=!1),this.count1Tag+=e,1==this.play2?this.count2Tag+=e:0==this.play2&&(this.count2Tag=0),1==this.play3&&(this.count1Tag=0),this.count1Tag>10&&(this.count1Tag=0))},FadeOutEffect:function(){if(this.FadeOutCount!=this.ClearOff.length){for(var e=0;e<this.ClearOff[this.FadeOutCount].length;e++){cc.vv.DataMgr.EffectBoard.children[this.ClearOff[this.FadeOutCount][e]].getChildByName("body").getChildByName("Xiaochu").runAction(cc.sequence(cc.scaleTo(.2,.8),cc.scaleTo(.2,1.2),cc.fadeOut(.3)))}this.FadeOutCount+=1}else{this.FadeOutCount=0,cc.vv.gamelogic.isdeling&&11!=cc.vv.gamelogic.isHelpToPlay&&12!=cc.vv.gamelogic.isHelpToPlay&&13!=cc.vv.gamelogic.isHelpToPlay&&cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").checkIsLose()}},defeate:function(){var e=this;this.scheduleOnce(function(){e.defeateCount=0,e.ar=[];for(var c=cc.vv.DataMgr.EffectBoard,t=0;t<c.childrenCount;t++)"1"==c.children[t].id&&(e.ar.push(t),c.children[t].getChildByName("shadow").getComponent(cc.Sprite).spriteFrame=null,c.children[t].getChildByName("defeate").active=!0);e.ar.sort(function(){return.5-Math.random()}),cc.vv.AudioMgr.playDie(window.isOpenVoice),e.schedule(e.defeateOne,.032,e.ar.length,0)},.1)},GameLifeReset:function(e){var c=this;this.scheduleOnce(function(){c.defeateCount=0,c.ar=[];for(var t=cc.vv.DataMgr.EffectBoard,n=0;n<t.childrenCount;n++)"0"!=t.children[n].id&&t.children[n].id&&(c.ar.push(n),t.children[n].getChildByName("shadow").getComponent(cc.Sprite).spriteFrame=null,t.children[n].getChildByName("defeate").active=!1);c.scheduleOnce(function(){c.defeateReset(e)},.1)},.1)},defeateReset:function(e){for(var c=0;c<100;c++){if(this.defeateCount==this.ar.length)return cc.vv.gamelogic.GameLife(e),c=100,void this.unschedule(this.defeateReset);var t=this.ar[this.defeateCount];cc.vv.DataMgr.EffectBoard.children[t].getChildByName("body").getChildByName("Xianshi").getComponent(cc.Sprite).spriteFrame=this.BlockColor[e],cc.vv.DataMgr.EffectBoard.children[t].getChildByName("body").getChildByName("Xianshi").runAction(cc.fadeIn(.1)),cc.vv.DataMgr.EffectBoard.children[t].id="1",cc.vv.DataMgr.EffectBoard.children[t].getChildByName("defeate").opacity=0,this.defeateCount++}},defeateOne:function(){if(this.defeateCount==this.ar.length)return cc.find("UI_ROOT/Canvas").getComponent("game").unschedule(cc.find("UI_ROOT/Canvas").getComponent("game").getGameTime),cc.find("UI_ROOT/Canvas/UI/gameover").getComponent("gameover").DefeateShow(),void this.unschedule(this.defeateOne);var e=this.ar[this.defeateCount];cc.vv.DataMgr.EffectBoard.children[e].getChildByName("body").getChildByName("Xianshi").runAction(cc.fadeOut(.1)),cc.vv.DataMgr.EffectBoard.children[e].id="2",cc.vv.DataMgr.EffectBoard.children[e].getChildByName("defeate").opacity=255,this.defeateCount++},Reset:function(){var e=cc.vv.DataMgr.EffectBoard;this.count1Tag=0,this.count2Tag=0;for(var c=0;c<e.childrenCount;c++){var t=e.children[c].getChildByName("body").getChildByName("Xiaochu");t.runAction(cc.fadeOut(.1)),t.getComponent(cc.Sprite).spriteFrame=null;var n=e.children[c].getChildByName("body").getChildByName("Xianshi");n.runAction(cc.fadeOut(.1)),n.getComponent(cc.Sprite).spriteFrame=null,e.children[c].getChildByName("defeate").active=!1,e.children[c].getChildByName("shadow").getComponent(cc.Sprite).spriteFrame=null,e.children[c].id="0",cc.vv.DataMgr.LogicBoard.children[c].id="0"}cc.sys.garbageCollect(),console.log("AAAA")}}),cc._RF.pop()},{}],gameManage:[function(e,c,t){"use strict";cc._RF.push(c,"e05daqee4FKUZf8QeswoxaN","gameManage"),Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getWordPos=function(){},e.controlBox=null,e}();t.default=n,cc._RF.pop()},{}],gamelogic:[function(e,c,t){"use strict";cc._RF.push(c,"fb08fyMDyhACZwyOjbtsYxQ","gamelogic");var n={random:function(e,c){return Math.floor(Math.random()*(c-e+1)+e)},FirstDelete:function(e,c,t){this.shapePos=t;var n=[];this.rowDelete=[],this.colDelete=[],this.lastPos=e;for(var o=cc.vv.DataMgr.LogicBoard,i=(cc.vv.DataMgr.EffectBoard,0);i<o.childrenCount;i++)o.children[i].getChildByName("singleBlock")?n.push(o.children[i].getPosition()):n.push(null);for(var a=0;a<8;a++)for(var r=8*a,s=0,l=0;l<8;l++)n[l+r]&&(s+=1),8==s&&this.rowDelete.push((r+8)/8-1);for(var d=0;d<8;d++){r=8*(d+1),s=0;for(var u=0;u<64;u+=8){n[d+u]&&(s+=1),8==s&&this.colDelete.push(r/8-1)}}return this.colDelete&&this.colDelete.length>0||this.rowDelete&&this.rowDelete.length>0?(this.SecondDelete(this.rowDelete,this.colDelete,c),!0):(this.lastPos=[],!1)},SecondDelete:function(e,c,t){this.dele=[];for(var n=0;n<e.length;n++)if(null!=e[n])for(var o=0;o<8;o++){var i=8*e[n]+o;this.dele.push(i)}for(n=0;n<c.length;n++)if(null!=c[n])for(o=0;o<8;o++){i=c[n]+8*o;this.dele.push(i)}this.colDelete=null,this.rowDelete=null,this.ThirdDelete(this.dele,e,c,t)},GameLife:function(e){for(var c=[],t=[],n=cc.vv.DataMgr.LogicBoard,o=0;o<n.childrenCount;o++)n.children[o].getChildByName("singleBlock")?c.push(n.children[o].getPosition()):c.push(null);for(var i=0;i<5;i++)for(var a=8*i,r=0;r<8;r++)c[a+r]&&t.push(a+r);cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").GameResetDeal(t,e),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").delete(t),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").GameResetDele(e,t)},ThirdDelete:function(e,c,t,n){var o=t.length+c.length;o<=2?this.score=10*o:3==o?this.score=20*o:4==o?this.score=25*o:5==o&&(this.score=40*o),cc.vv.gamelogic.CountScore(this.score);var i=[];if(0!=c.length&&0!=t.length){for(var a=[],r=e.sort(),s=[r[0]],l=1;l<r.length;l++)r[l]!==s[s.length-1]?s.push(r[l]):a.push(r[l]);i=s;for(l=0;l<i.length-1;l++)for(var d=0;d<i.length-l-1;d++)if(i[d]>i[d+1]){var u=i[d];i[d]=i[d+1],i[d+1]=u}}else 0!=c.length&&0==t.length?(i=e,c.length>1&&(this.rows=c)):0!=t.length&&0==c.length&&(i=e,t.length>1&&(this.cols=t));for(var h=[],g=0;g<8;g++){var v=[];for(l=0;l<this.lastPos.length;l++){for(var f=[],p=cc.v3(this.lastPos[l].x,this.lastPos[l].y+76*(g+1)),m=0;m<this.lastPos.length;m++)if(p.x==this.lastPos[m].x&&p.y==this.lastPos[m].y){p=null;break}(null==p||p.x>266||p.x<-266||p.y>266||p.y<-266)&&(p=null);var C=cc.v3(this.lastPos[l].x,this.lastPos[l].y-76*(g+1));for(m=0;m<this.lastPos.length;m++)if(C.x==this.lastPos[m].x&&C.y==this.lastPos[m].y){C=null;break}(null==C||C.x>266||C.x<-266||C.y>266||C.y<-266)&&(C=null);var y=cc.v3(this.lastPos[l].x-76*(g+1),this.lastPos[l].y);for(m=0;m<this.lastPos.length;m++)if(y.x==this.lastPos[m].x&&y.y==this.lastPos[m].y){y=null;break}(null==y||y.x>266||y.x<-266||y.y>266||y.y<-266)&&(y=null);var w=cc.v3(this.lastPos[l].x+76*(g+1),this.lastPos[l].y);for(m=0;m<this.lastPos.length;m++)if(w.x==this.lastPos[m].x&&w.y==this.lastPos[m].y){w=null;break}if((null==w||w.x>266||w.x<-266||w.y>266||w.y<-266)&&(w=null),null!=p)for(var O=0;O<cc.vv.DataMgr.LogicBoard.childrenCount;O++)p.x==cc.vv.DataMgr.LogicBoard.children[O].x&&p.y==cc.vv.DataMgr.LogicBoard.children[O].y&&f.push(O);if(null!=C)for(O=0;O<cc.vv.DataMgr.LogicBoard.childrenCount;O++)C.x==cc.vv.DataMgr.LogicBoard.children[O].x&&C.y==cc.vv.DataMgr.LogicBoard.children[O].y&&f.push(O);if(null!=y)for(O=0;O<cc.vv.DataMgr.LogicBoard.childrenCount;O++)y.x==cc.vv.DataMgr.LogicBoard.children[O].x&&y.y==cc.vv.DataMgr.LogicBoard.children[O].y&&f.push(O);if(null!=w)for(O=0;O<cc.vv.DataMgr.LogicBoard.childrenCount;O++)w.x==cc.vv.DataMgr.LogicBoard.children[O].x&&w.y==cc.vv.DataMgr.LogicBoard.children[O].y&&f.push(O);v.push(f)}h.push(v)}var B=[];for(l=0;l<h.length;l++){var A=[];for(d=0;d<h[l].length;d++)for(g=0;g<h[l][d].length;g++)null!=h[l][d][g]&&A.push(h[l][d][g]);B.push(A)}for(var _=0;_<B.length-2;_++){g=B[_];for(var b=B[_+1],I=0;I<b.length;I++)for(var S=0;S<g.length;S++)b[I]==g[S]&&(b[I]=null)}var T=[];for(l=0;l<B.length;l++){for(var R=[],M=0;M<i.length;M++)for(d=0;d<B[l].length;d++)i[M]==B[l][d]&&R.push(B[l][d]);T.push(R)}var k=[];for(l=0;l<cc.vv.DataMgr.LogicBoard.childrenCount;l++)for(d=0;d<this.lastPos.length;d++)cc.vv.DataMgr.LogicBoard.children[l].x==this.lastPos[d].x&&cc.vv.DataMgr.LogicBoard.children[l].y==this.lastPos[d].y&&k.push(l);var N=[];for(l=0;l<k.length;l++)for(d=0;d<i.length;d++)k[l]==i[d]&&N.push(k[l]);T.unshift(N);var D=[];for(l=0;l<T.length;l++)T[l].length>0&&D.push(T[l]);for(l=0;l<D.length&&l!=D.length-1;l++)for(M=l+1;M<D.length;M++)for(g=0;g<D[l].length;g++)for(b=0;b<D[M].length;b++)D[l][g]==D[M][b]&&(D[M][b]=null);var P=[];for(l=0;l<D.length;l++){var x;x=Array.from(new Set(D[l])),P.push(x)}var F=[];for(l=0;l<P.length;l++){var U=[];for(d=0;d<P[l].length;d++)null!=P[l][d]&&U.push(P[l][d]);U.length>0&&F.push(U)}if(null!=this.rows)var L=this.rows.length;if(null!=this.cols)var E=this.cols.length;if(null==E&&(E=0),null==L&&(L=0),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").DeleteDeal(F,i,this.Colorindex),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").delete(i),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").DeleteDeal(F,this.Colorindex,i),o>0){for(_=[],l=0;l<i.length;l++)for(d=0;d<k.length;d++)i[l]==k[d]&&_.push(i[l]);cc.vv.gamelogic.Numshow(o,_,n)}},MoveChangeColor:function(e,c){this.Colorindex=e;for(var t=[],n=[],o=[],i=[],a=cc.vv.DataMgr.EffectBoard,r=0;r<a.childrenCount;r++)1==a.children[r].getChildByName("shadow").active?t.push(a.children[r].getPosition()):t.push(null);for(var s=0;s<a.childrenCount;s++)"1"==a.children[s].selfTag?n.push(a.children[s].getPosition()):n.push(null);for(var l=0;l<8;l++)for(var d=8*l,u=0,h=0;h<8;h++)t[h+d]&&(u+=1),8==u&&o.push((d+8)/8-1);for(var g=0;g<8;g++){d=8*(g+1),u=0;for(var v=0;v<64;v+=8){t[g+v]&&(u+=1),8==u&&i.push(d/8-1)}}if(i&&i.length>0||o&&o.length>0){var f=[],p=[],m=[];for(l=0;l<o.length;l++)if(null!=o[l])for(h=0;h<8;h++){var C=8*o[l]+h;f.push(C),m.push(C)}for(l=0;l<i.length;l++)if(null!=i[l])for(h=0;h<8;h++){C=i[l]+8*h;p.push(C),m.push(C)}var y=[];for(l=0;l<c.length;l++)for(h=0;h<cc.vv.DataMgr.LogicBoard.childrenCount;h++)c[l].x==cc.vv.DataMgr.LogicBoard.children[h].x&&c[l].y==cc.vv.DataMgr.LogicBoard.children[h].y&&y.push(h);var w=[];for(l=0;l<y.length;l++){for(h=0;h<f.length;h++)y[l]==f[h]&&w.push(y[l]);for(h=0;h<p.length;h++)y[l]==p[h]&&w.push(y[l])}var O=[];for(l=0;l<w.length;l++)O.push(cc.v3(cc.vv.DataMgr.LogicBoard.children[w[l]].x,cc.vv.DataMgr.LogicBoard.children[w[l]].y));var B=[];for(l=0;l<m.length;l++)for(h=0;h<y.length;h++)m[l]==y[h]&&(m[l]=null);for(l=0;l<m.length;l++)null!=m[l]&&B.push(m[l]);return cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").MoveDealColAndRow(e,B),this.returnDele=B,this.MoveChangeColorReturn(B),O}return this.MoveChangeColorReturn(null,null),!1},MoveChangeColorReturn:function(e,c){var t=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects");if(e){for(var n=[],o=0;o<64;o++)n.push(o);var i=e;for(o=0;o<i.length;o++)for(var a=0;a<n.length;a++)i[o]==n[a]&&(n[a]=null);(t=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects")).returnDealColAndRow(n)}else t.returnDealColAndRow(e,c)},CountScore:function(e){cc.vv.GameScore+=e,cc.director.getScene().getChildByName("UI_ROOT").getChildByName("Canvas").getComponent("game").addscroe(cc.vv.GameScore-e,e)},HamLight:function(e,c){for(var t=[],n=[],o=0;o<7;o++){var i=[],a=cc.v3(e.x,e.y+76*(o+1));(null==a||a.x>266||a.x<-266||a.y>266||a.y<-266)&&(a=null);var r=cc.v3(e.x,e.y-76*(o+1));(null==r||r.x>266||r.x<-266||r.y>266||r.y<-266)&&(r=null);var s=cc.v3(e.x-76*(o+1),e.y);(null==s||s.x>266||s.x<-266||s.y>266||s.y<-266)&&(s=null);var l=cc.v3(e.x+76*(o+1),e.y);if((null==l||l.x>266||l.x<-266||l.y>266||l.y<-266)&&(l=null),null!=a)for(var d=0;d<cc.vv.DataMgr.LogicBoard.childrenCount;d++)a.x==cc.vv.DataMgr.LogicBoard.children[d].x&&a.y==cc.vv.DataMgr.LogicBoard.children[d].y&&(t.push(d),i.push(d));if(null!=r)for(d=0;d<cc.vv.DataMgr.LogicBoard.childrenCount;d++)r.x==cc.vv.DataMgr.LogicBoard.children[d].x&&r.y==cc.vv.DataMgr.LogicBoard.children[d].y&&(t.push(d),i.push(d));if(null!=s)for(d=0;d<cc.vv.DataMgr.LogicBoard.childrenCount;d++)s.x==cc.vv.DataMgr.LogicBoard.children[d].x&&s.y==cc.vv.DataMgr.LogicBoard.children[d].y&&(t.push(d),i.push(d));if(null!=l)for(d=0;d<cc.vv.DataMgr.LogicBoard.childrenCount;d++)l.x==cc.vv.DataMgr.LogicBoard.children[d].x&&l.y==cc.vv.DataMgr.LogicBoard.children[d].y&&(t.push(d),i.push(d));n.push(i)}var u=[c];n.unshift(u),this.DeleAll=n,this.LightArr=t;for(var h=0;h<cc.vv.DataMgr.LogicBoard.childrenCount;h++)cc.vv.DataMgr.LogicBoard.children[h].x==e.x&&cc.vv.DataMgr.LogicBoard.children[h].y==e.y&&t.push(h);for(h=0;h<t.length-1;h++)for(var g=0;g<t.length-h-1;g++)if(t[g]>t[g+1]){var v=t[g];t[g]=t[g+1],t[g+1]=v}cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").HamLight(t,c)},SendToEffect:function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").HitBlock(this.DeleAll,this.LightArr)},RemoveNode:function(){for(var e=0;e<this.LightArr.length;e++){var c=this.LightArr[e],t=cc.vv.DataMgr.LogicBoard.children[c];t.isHaveFK&&(t.isHaveFK=!1)}},CountStarAoe:function(e){e=cc.vv.DataMgr.LogicBoard.children[e].position;var c=[],t=cc.v3(e.x,e.y+76);(null==t||t.x>266||t.x<-266||t.y>266||t.y<-266)&&(t=null);var n=cc.v3(e.x,e.y-76);(null==n||n.x>266||n.x<-266||n.y>266||n.y<-266)&&(n=null);var o=cc.v3(e.x-76,e.y);(null==o||o.x>266||o.x<-266||o.y>266||o.y<-266)&&(o=null);var i=cc.v3(e.x+76,e.y);(null==i||i.x>266||i.x<-266||i.y>266||i.y<-266)&&(i=null);var a=cc.v3(e.x+76,e.y+76);(null==a||a.x>266||a.x<-266||a.y>266||a.y<-266)&&(a=null);var r=cc.v3(e.x+76,e.y-76);(null==r||r.x>266||r.x<-266||r.y>266||r.y<-266)&&(r=null);var s=cc.v3(e.x-76,e.y-76);(null==s||s.x>266||s.x<-266||s.y>266||s.y<-266)&&(s=null);var l=cc.v3(e.x-76,e.y+76);(null==l||l.x>266||l.x<-266||l.y>266||l.y<-266)&&(l=null),null!=t&&c.push(t),null!=n&&c.push(n),null!=o&&c.push(o),null!=i&&c.push(i),null!=a&&c.push(a),null!=r&&c.push(r),null!=s&&c.push(s),null!=l&&c.push(l),c.push(e);for(var d=[],u=0;u<cc.vv.DataMgr.LogicBoard.childrenCount;u++)for(var h=0;h<c.length;h++)cc.vv.DataMgr.LogicBoard.children[u].x==c[h].x&&cc.vv.DataMgr.LogicBoard.children[u].y==c[h].y&&d.push(u);return d},countNum:function(e){cc.vv.gamelogic.countindex+=e,cc.vv.gamelogic.countindex>=10&&cc.vv.gamelogic.countindex%10==0&&cc.find("UI_ROOT/Canvas/UI/rock/main/StarProp/starNode").getComponent("Star")},Numshow:function(e,c,t){for(var n,o=0;o<cc.vv.DataMgr.LogicBoard.childrenCount;o++)for(var i=0;i<c.length;i++)n=cc.vv.DataMgr.LogicBoard.children[c[i]].position;var a=10*e;cc.find("UI_ROOT/Canvas/UI/rock/main/Prompt").getComponent("Prompt").onShowScore(a,n,t)},JumpIn:function(e){var c=cc.fadeIn(.25),t=cc.scaleTo(.5,1).easing(cc.easeBackOut(.1)),n=cc.spawn(c,t);e.runAction(n)},JumpOut:function(e){var c=cc.fadeOut(.25),t=cc.scaleTo(.5,0).easing(cc.easeBackOut(.1)),n=cc.spawn(c,t);e.runAction(n)},rockUp:function(){cc.find("UI_ROOT/Canvas/UI").getChildByName("rock").runAction(cc.moveTo(1,cc.v3(0,0)).easing(cc.easeBackOut(.2)))},rockDown:function(){var e=cc.find("UI_ROOT/Canvas/UI").getChildByName("rock"),c=-(e.width+cc.vv.Winsize/2);e.runAction(cc.moveTo(1,cc.v3(0,c)).easing(cc.easeBackIn(.2)))}};c.exports=n,cc._RF.pop()},{}],gameover:[function(e,c,t){"use strict";cc._RF.push(c,"7599dK/0c9L/LA7kzdcr3Ak","gameover"),cc.Class({extends:cc.Component,properties:{againBtn:cc.Node,gameCenterBtn:cc.Node,returnHome:cc.Node,scoreNow:cc.Node,scoreBest:cc.Node,reliveNode:cc.Node,countnumber:5,preNumber:0,pl:cc.ParticleSystem},onLoad:function(){var e=this;this.Firstscale(),this.dieShow=!1,g_AD.bindCallBack(function(){e.reliveShow()},function(){e.dieShow=!0,e.showOver()})},callback_video:function(e,c){"rewardVideoClose"==e&&(this.countnumber=5,"true"==c?this.reliveShow():(this.dieShow=!0,this.showOver()))},onExitGame:function(){cc.game.end()},Firstscale:function(){this.againBtn.setScale(0,0),this.gameCenterBtn.setScale(0,0),this.returnHome.setScale(0,0),this.scoreNow.setScale(0,0),this.scoreBest.setScale(0,0)},InScale:function(){this.againBtn.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut(.2)),cc.fadeIn(.1))),this.gameCenterBtn.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut(.2)),cc.fadeIn(.1))),this.returnHome.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut(.2)),cc.fadeIn(.1)))},OutScale:function(){this.againBtn.runAction(cc.spawn(cc.scaleTo(.3,0).easing(cc.easeBackOut(.2)),cc.fadeOut(.1))),this.gameCenterBtn.runAction(cc.spawn(cc.scaleTo(.3,0).easing(cc.easeBackOut(.2)),cc.fadeOut(.1))),this.returnHome.runAction(cc.spawn(cc.scaleTo(.3,0).easing(cc.easeBackOut(.2)),cc.fadeOut(.1))),this.scoreNow.runAction(cc.spawn(cc.scaleTo(.3,0).easing(cc.easeBackOut(.2)),cc.fadeOut(.1))),this.scoreBest.runAction(cc.spawn(cc.scaleTo(.3,0).easing(cc.easeBackOut(.2)),cc.fadeOut(.1)))},countNum:function(){var e=this;this.reliveNode.getChildByName("bottom_revive").getChildByName("circle_1").getChildByName("countNum").getComponent(cc.Label).string=(--this.countnumber).toString(),this.countnumber<=0&&(this.reliveNode.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,600)).easing(cc.easeBackInOut()),cc.callFunc(function(){e.reliveNode.active=!1}))),this.countnumber=5,!window.noAD&&g_AD.getHaveFullScreen()&&this.isNetWork()&&(window.g_gameTime-window.g_fullAdTime>15||0==window.g_fullAdTime)&&(window.g_fullAdTime=window.g_gameTime,g_AD.playFullAD()),this.dieShow=!0,this.showOver(),this.unschedule(this.countNum))},reliveShow:function(){cc.find("UI_ROOT/Canvas/UI/bg_3").runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/bg_3").active=!1})));window.g_gameTime=0,window.g_fullAdTime=0,cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!0,cc.vv.GameScore=this.preNumber,cc.find("UI_ROOT/Canvas/UI/rock/score").getChildByName("presentNum").getComponent(cc.Label).string=this.preNumber.toString(),cc.find("UI_ROOT/Canvas").getComponent("game").schedule(cc.find("UI_ROOT/Canvas").getComponent("game").getGameTime,1),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").runAction(cc.sequence(cc.delayTime(.1),cc.scaleTo(.3,1,1).easing(cc.easeBackOut()))),window.isOpenMusic&&cc.audioEngine.resume(cc.vv.AudioMgr.playBG);var e=Math.round(4*Math.random());cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").GameLifeReset(e)},isNetWork:function(){if(cc.sys.os==cc.sys.OS_IOS){var e=jsb.reflection.callStaticMethod("ReachabilityEx","getNetworkTyp");return-1!=Number(e)}},watchAdBtn:function(){var e=this;this.countnumber<=0||(this.unschedule(this.countNum),this.countnumber=5,cc.vv.AudioMgr.playKeySound(window.isOpenVoice),this.reliveNode.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,600)).easing(cc.easeBackInOut()),cc.callFunc(function(){e.reliveNode.active=!1}))),cc.sys.isMobile||this.scheduleOnce(function(){this.reliveShow()},1),g_AD.playRewardVideoAD())},reliveClose:function(){var e=this;cc.vv.AudioMgr.playKeySound(window.isOpenVoice),this.countnumber<=0||(this.unschedule(this.countNum),this.countnumber=5,this.reliveNode.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,600)).easing(cc.easeBackInOut()),cc.callFunc(function(){e.reliveNode.active=!1}))),!window.noAD&&g_AD.getHaveFullScreen()&&this.isNetWork()&&(window.g_gameTime-window.g_fullAdTime>15||0==window.g_fullAdTime)&&(window.g_fullAdTime=window.g_gameTime,g_AD.playFullAD()),this.dieShow=!0,this.showOver())},DefeateShow:function(){cc.audioEngine.pause(cc.vv.AudioMgr.playBG),cc.log("2>>"),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.vv.gamelogic.GameOverCount+=1;var e=parseInt(cc.find("UI_ROOT/Canvas/UI/rock/score").getChildByName("presentNum").getComponent(cc.Label).string);if(this.preNumber=e,e>parseInt(cc.vv.DataMgr.historyBest)?(isNaN(cc.vv.DataMgr.historyBest)&&(cc.vv.DataMgr.historyBest=0),this.scoreBest.getComponent(cc.Label).string=cc.vv.DataMgr.historyBest.toString()):this.scoreBest.getComponent(cc.Label).string=cc.find("UI_ROOT/Canvas/UI/rock/score").getChildByName("historyNum").getComponent(cc.Label).string,this.node.active=!0,this.node.setPosition(0,1600),cc.sys.isMobile||window.isRelive)if((e>=window.g_iScore||window.g_gameTime>window.g_dealTime_Video)&&g_AD.getHaveRewardVideo()&&!window.isRelive&&this.isNetWork()){var c;window.isRelive=!0,this.reliveNode.getChildByName("bottom_revive").getChildByName("circle_1").getChildByName("circle_2").getComponent(cc.ProgressBar).progress=1,this.reliveNode.position=cc.v2(0,600),this.reliveNode.active=!0,this.reliveNode.runAction(cc.moveTo(.5,cc.v2(0,-500)).easing(cc.easeBackInOut())),cc.find("UI_ROOT/Canvas/UI/bg_3").active=!0,(c=cc.find("UI_ROOT/Canvas/UI/bg_3")).runAction(cc.fadeIn(.5)),this.reliveNode.getChildByName("bottom_revive").getChildByName("circle_1").getChildByName("countNum").getComponent(cc.Label).string=this.countnumber.toString(),this.schedule(this.countNum,1)}else this.dieShow=!0,this.showOver();else window.isRelive=!0,this.reliveNode.getChildByName("bottom_revive").getChildByName("circle_1").getChildByName("circle_2").getComponent(cc.ProgressBar).progress=1,this.reliveNode.position=cc.v2(0,600),this.reliveNode.active=!0,this.reliveNode.runAction(cc.moveTo(.5,cc.v2(0,-500)).easing(cc.easeBackInOut())),(c=cc.find("UI_ROOT/Canvas/UI/bg_3")).opacity=0,c.active=!0,c.runAction(cc.fadeIn(.5)),this.schedule(this.countNum,1);var t=Math.floor(Number(cc.sys.localStorage.getItem("totalTime"))+window.totTime);cc.sys.localStorage.setItem("totalTime",t),cc.vv.gameCenter.gameCenter(t,window.rank_gameTime)},showOver:function(){if(this.dieShow){parseInt(cc.sys.localStorage.getItem("gold"))<cc.vv.GameScore&&cc.sys.localStorage.setItem("gold",cc.vv.GameScore),window.isFirst&&(window.isFirst=!1);var e=cc.sys.localStorage.getItem("gameCount");cc.sys.localStorage.setItem("gameCount",++e),e%window.g_iDieNum!=0&&2!=e||cc.vv.gameCenter.fiveStar();var c=cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/bg_3").active=!0,cc.find("UI_ROOT/Canvas/UI/bg_3").runAction(cc.fadeIn(.5)),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!1});this.node.active=!0,this.node.setPosition(0,1600),this.scheduleOnce(function(){var e=-35*this.node.parent.height/100;this.node.runAction(cc.sequence(cc.moveTo(.6,cc.v3(0,e)),c)),this.scheduleOnce(function(){this.scheduleOnce(this.showscroe,.4)},.5)},.1),this.dieShow=!1}},showscroe:function(){var e=cc.find("UI_ROOT/Canvas/UI/rock/score");this.nowIndex=parseInt(e.getChildByName("presentNum").getComponent(cc.Label).string),this.bestIndex=parseInt(e.getChildByName("historyNum").getComponent(cc.Label).string),this.scoreNow.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut(.2)),cc.fadeIn(.1))),this.scoreBest.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut(.2)),cc.fadeIn(.1))),this.nowIndex>10?(this.addNumCount=1,this.nowNum=parseInt(this.nowIndex/10),this.YushuNum=this.nowIndex%10,this.schedule(this.addNum10,.06,10+this.YushuNum,.1)):(this.addNumCount=1,this.schedule(this.addNum0,.06,this.nowIndex,.1))},addNum0:function(){var e=this,c=this.scoreNow.getComponent(cc.Label),t=this.scoreBest.getComponent(cc.Label);if(parseInt(c.string)==this.nowIndex)return parseInt(c.string)>cc.vv.DataMgr.historyBest&&(cc.vv.AudioMgr.playCrown(window.isOpenVoice),cc.vv.DataMgr.historyBest=this.nowIndex),void this.scheduleOnce(function(){e.InScale()},.1);c.string=this.addNumCount.toString(),parseInt(c.string)>cc.vv.DataMgr.historyBest&&(t.string=c.string),this.addNumCount++},addNum10:function(){var e=this,c=this.scoreNow.getComponent(cc.Label),t=this.scoreBest.getComponent(cc.Label);if(parseInt(c.string)==this.nowIndex)return parseInt(c.string)>cc.vv.DataMgr.historyBest&&(cc.vv.AudioMgr.playCrown(window.isOpenVoice),cc.vv.DataMgr.historyBest=this.nowIndex),void this.scheduleOnce(function(){e.InScale()},.1);if(this.addNumCount<11)c.string=this.nowNum*this.addNumCount;else if(this.addNumCount>=11){var n=parseInt(c.string)+1;c.string=n.toString()}parseInt(c.string)>cc.vv.DataMgr.historyBest&&(t.string=c.string),this.addNumCount++},onRestartGame:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),window.isOpenMusic&&cc.audioEngine.resume(cc.vv.AudioMgr.playBG),this.FunAgain(function(){window.g_gameTime=0,window.g_fullAdTime=0,window.isRelive=!1,window.isRecord=!1,cc.find("UI_ROOT/Canvas").getComponent("game").schedule(cc.find("UI_ROOT/Canvas").getComponent("game").getGameTime,1),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!0,cc.log("5555 >>");var e=cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn");e.scaleX=.001,e.scaleY=.001,e.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.3,1).easing(cc.easeBackOut()))),window.isRelive=!1}),!window.noAD&&g_AD.getHaveFullScreen()&&this.isNetWork()&&(window.g_gameTime-window.g_fullAdTime>15||0==window.g_fullAdTime)&&(window.g_fullAdTime=window.g_gameTime,g_AD.playFullAD())},FunAgain:function(e){this.OutScale(),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").removeAllChildren(),this.scoreNow.getComponent(cc.Label).string="0",this.scoreBest.getComponent(cc.Label).string="0",this.node.runAction(cc.moveTo(.6,cc.v3(0,1600)).easing(cc.easeBackIn(.2)));var c=cc.delayTime(.2),t=cc.delayTime(.3),n=cc.callFunc(this.FunC_1,this),o=cc.callFunc(this.FunC_2,this),i=cc.callFunc(function(){e&&e()},this);this.node.runAction(cc.sequence(c,n,t,o,i))},FunC_1:function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").Reset(),cc.director.getScene().getChildByName("UI_ROOT").getChildByName("Canvas").getComponent("game").Resetscroe()},FunC_2:function(){var e=cc.find("UI_ROOT/Canvas/UI").getChildByName("rock"),c=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom");e.runAction(cc.moveTo(.6,cc.v3(0,-423)).easing(cc.easeBackOut(.2))),c.init(),c.LoadAni(),1==cc.vv.DataMgr.isOpenMusic&&(cc.find("UI_ROOT/Canvas/UI/rock/Layer").active=!1),cc.find("UI_ROOT/Canvas/UI").getChildByName("gameover").active=!1,cc.find("UI_ROOT/Canvas/UI/bg_3").runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/bg_3").active=!1})))},onReturnHome:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),window.isOpenMusic&&cc.audioEngine.resume(cc.vv.AudioMgr.playBG),this.OutScale(),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!1,window.g_gameTime=0,window.g_fullAdTime=0,window.isRecord=!1,this.node.runAction(cc.sequence(cc.moveTo(.6,cc.v3(0,2e3)).easing(cc.easeBackIn(.2)),cc.callFunc(function(){var e;(e=cc.find("UI_ROOT/Canvas/UI/bg_3")).runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/bg_3").active=!1}))),cc.find("UI_ROOT/bg").runAction(cc.moveTo(1,cc.v3(0,-280))).easing(cc.easeBackOut(.5)),cc.find("UI_ROOT/gameMenu").runAction(cc.moveTo(1,cc.v3(0,0))).easing(cc.easeBackOut(.5)),cc.find("UI_ROOT/Canvas").runAction(cc.moveTo(1,cc.v3(0,-850))).easing(cc.easeBackOut(.5)),(e=cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2")).runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.active=!1}))),this.node.active=!1},this))),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").Reset(),cc.director.getScene().getChildByName("UI_ROOT").getChildByName("Canvas").getComponent("game").Resetscroe(),cc.log("1>>"),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.find("UI_ROOT/Canvas/UI/rock/Layer").active=!1,cc.find("UI_ROOT/Canvas/UI/bg_3").runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/bg_3").active=!1}))),window.isRelive=!1},OnGameCenter:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),cc.vv.gameCenter.openGameCenter()},OnFiveStar:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),cc.vv.gameCenter.fiveStar()}}),cc._RF.pop()},{}],game:[function(e,c,t){"use strict";cc._RF.push(c,"c59d5TxorJGf6jSrZN4BAS9","game"),window.iap=e("iap");var n=e("GameCenter");window.isTouchStart=!1,window.isBackAction=!1,window.isRecord=!1,window.isFirst=!1,cc.Class({extends:cc.Component,properties:{score:{type:cc.Node,default:null},Prompt:{type:cc.Node,default:null},main:{type:cc.Node,default:null},UI:{type:cc.Node,default:null},bgNode:{type:cc.Node,default:null},gameMenu:{type:cc.Node,default:null},pauseNode:{type:cc.Node,default:null},volices:[cc.SpriteFrame],isFirstTime:!0,BlockColor:cc.SpriteFrame,box:cc.Prefab,recordParticle:cc.ParticleSystem,recordBestAni:cc.Node},AllInit:function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").init(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").initLogicBoard(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").initEffectBoard(),this.initscore()},initscore:function(){var e=this.score.getChildByName("presentNum"),c=this.score.getChildByName("historyNum");this.persentS=e.getComponent(cc.Label),this.historyS=c.getComponent(cc.Label),this.history()},initglobe:function(){null==cc.sys.localStorage.getItem("gameCount")&&cc.sys.localStorage.setItem("gameCount",0),cc.game.setFrameRate(60),null==cc.vv&&(cc.vv={});var c=e("gamelogic");cc.vv.gamelogic=c;var t=e("DataMgr");cc.vv.DataMgr=t;cc.vv.GameScore=0;var o=e("AudioMgr");cc.vv.AudioMgr=o,cc.vv.gamelogic.countindex=0,cc.sys.localStorage.getItem("gold")||(window.isFirst=!0,cc.sys.localStorage.setItem("gold",0)),cc.vv.AudioMgr.VolIndex=1,n.init(),cc.vv.gameCenter=n,cc.vv.gamelogic.GameOverCount=0,window.g_gameTime=0,window.g_fullAdTime=0,cc.sys.localStorage.getItem("removeADS")?"true"==cc.sys.localStorage.getItem("removeADS")?window.noAD=!0:"false"==cc.sys.localStorage.getItem("removeADS")&&(window.noAD=!1):(cc.sys.localStorage.setItem("removeADS","false"),window.noAD=!1),window.totTime=0,cc.sys.localStorage.getItem("totalTime")||cc.sys.localStorage.setItem("totalTime",""),window.isRelive=!1,window.isBuyAD=!1,window.isOpenVoice=!0,window.clickPauseBtn=0},onLoad:function(){var e=(new Date).getTime();window.isMaJia=e<=16005312e5,g_AD.initADManager(),iap.init(),g_AD.bindCallBack(function(e){}),iap.setCallback(function(e,c){switch(console.log("iap   \u56de\u8c03 "),console.log("iap name : "+e),console.log("iap p : "+c),e){case"onRestored":if(console.log("\u6062\u590d\u8d2d\u4e70mgs\uff1a"+c),!c)return window.isBuyAD=!0,cc.sys.localStorage.setItem("removeADS","false"),void console.log("window.isBuyAD: "+window.isBuyAD);window.isBuyAD&&(console.log("window.isBuyAD: "+window.isBuyAD),this.gameMenu.getChildByName("black").active=!0),window.isBuyAD=!0,window.noAD=!0,g_AD.hideBannerAD(),cc.sys.localStorage.setItem("removeADS","true");break;case"onBuy":window.noAD=!0,g_AD.hideBannerAD(),cc.sys.localStorage.setItem("removeADS","true")}}.bind(this)),this.initglobe(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").init()},start:function(){console.log("window.noAD2: "+window.noAD),this.LoadAllPre(),this.AllInit(),this.FullScreen(),this.logoAni(),this.cloudAni(),this.playBtnAni()},update:function(e){window.totTime+=e},FullScreen:function(){if(this.scheduleOnce(function(){cc.vv.AudioMgr.playOnloadEffect()},2.5),this.DownIndex=0,this.bili=cc.winSize.height/1136,cc.vv.gamelogic.WinSize=cc.winSize.height,cc.vv.gamelogic.FrameSizeH=cc.view.getFrameSize().height,2436==cc.view.getFrameSize().height&&(console.log("IphoneX"),this.DownIndex=120),this.BGM=1,cc.view.getFrameSize().width/cc.view.getFrameSize().height==.75){console.log("Pad");var e=cc.find("UI_ROOT").getComponent(cc.Canvas);e.fitHeight=!0,e.fitWidth=!1,cc.vv.gamelogic.isPad=!0}},addscroe:function(e,c){this.addscroeCount=0,this.cur=e,this.Addindex=c,this.schedule(this.addscroeOneByone,.01,this.Addindex,.1)},addscroeOneByone:function(){var e=this,c=parseInt(this.persentS.string);if(this.Addindex!=this.addscroeCount){if(this.cur+=1,this.persentS.string=this.cur,c>=parseInt(this.historyS.string)){window.isRecord||window.isFirst||0==cc.sys.localStorage.getItem("gold")||(cc.vv.AudioMgr.playRecord(window.isOpenVoice),this.recordParticle.resetSystem(),this.recordBestAni.opacity=255,this.recordBestAni.active=!0,this.recordBestAni.getComponent(cc.Animation).play("BestAni"),this.recordBestAni.getComponent(cc.Animation).on("finished",function(){e.recordBestAni.active=!1},this),window.isRecord=!0),this.historyS.string=c.toString();var t=parseInt(this.historyS.string)+1;this.historyS.string=t.toString()}this.addscroeCount+=1}else cc.vv.gameCenter.gameCenter(c,rank_bestScore)},history:function(){var e=parseInt(this.persentS.string),c=parseInt(cc.sys.localStorage.getItem("gold"));cc.vv.DataMgr.historyBest=c,c&&c>e?this.historyS.string=c.toString():c&&c<=e&&(this.historyS.string=cc.vv.GameScore)},Resetscroe:function(){cc.vv.GameScore=0,this.persentS.string="0"},LoadAllPre:function(){for(var e=1;e<19;e++){var c="prefabs/shape/"+e;cc.loader.loadRes(c,function(e,c){var t=cc.instantiate(c);cc.director.getScene().getChildByName("UI_ROOT").getChildByName("Canvas").getChildByName("ResourceHold").getChildByName("Shape").addChild(t,1)})}},cloudAni:function(){var e=this.bgNode.getChildByName("cloud1"),c=this.bgNode.getChildByName("cloud2"),t=cc.moveTo(.8,cc.v3(e.x+4,e.y+3)),n=cc.moveTo(.8,cc.v3(e.x+3,e.y-3)),o=cc.moveTo(.8,cc.v3(e.x-4,e.y+4)),i=cc.moveTo(.8,cc.v3(e.x-3,e.y-5));e.runAction(cc.repeatForever(cc.sequence(t,n,o,i)));var a=cc.moveTo(1,cc.v3(c.x+2,c.y+5)),r=cc.moveTo(1,cc.v3(c.x+5,c.y-2)),s=cc.moveTo(1,cc.v3(c.x-3,c.y+5)),l=cc.moveTo(1,cc.v3(c.x-2,c.y-5));c.runAction(cc.repeatForever(cc.sequence(a,r,s,l)))},logoAni:function(){},playBtnAni:function(){var e=this.gameMenu.getChildByName("startGame"),c=cc.scaleTo(.25,1.1),t=cc.scaleTo(.25,1),n=cc.repeatForever(cc.sequence(t,c));e.runAction(n)},sureBtn:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),this.gameMenu.getChildByName("black").active=!1},noadsBtn:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),iap.remove_ads()},rebuyBtn:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),iap.restore()},ranListBtn:function(){console.log("open gameCenter!!!"),cc.vv.AudioMgr.playKeySound(window.isOpenVoice),cc.vv.gameCenter.openGameCenter()},menuVoiceBtn:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice);var e=this.gameMenu.getChildByName("sound");1==this.BGM?(cc.vv.AudioMgr.VolIndex=0,window.isOpenVoice=!1,cc.audioEngine.pause(cc.vv.AudioMgr.playBG),console.log("\u97f3\u91cf\u5173"),e.getComponent(cc.Sprite).spriteFrame=this.volices[0],this.pauseNode.getChildByName("volice").getComponent(cc.Sprite).spriteFrame=this.volices[2],this.BGM=0,cc.vv.DataMgr.isOpenMusic=!1):(this.BGM=1,cc.vv.AudioMgr.VolIndex=1,window.isOpenVoice=!0,cc.audioEngine.resume(cc.vv.AudioMgr.playBG),console.log("\u97f3\u91cf\u5f00"),e.getComponent(cc.Sprite).spriteFrame=this.volices[1],this.pauseNode.getChildByName("volice").getComponent(cc.Sprite).spriteFrame=this.volices[3],cc.vv.DataMgr.isOpenMusic=!0)},getGameTime:function(){window.g_gameTime++},OnTouchToContinue:function(){var e;window.isMaJia?cc.director.loadScene("majia"):(cc.vv.AudioMgr.playKeySound(window.isOpenVoice),this.gameMenu.getChildByName("startGame").stopAllActions(),this.isFirstTime?(this.bgNode.runAction(cc.moveTo(1,cc.v3(0,680))),this.gameMenu.runAction(cc.moveTo(1,cc.v3(0,1100))),this.node.runAction(cc.moveTo(1,cc.v3(0,375))),(e=cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn")).scaleX=.001,e.scaleY=.001,e.runAction(cc.sequence(cc.delayTime(1.02),cc.scaleTo(.3,1).easing(cc.easeBackOut()))),cc.vv.DataMgr.isOpenMusic=!0,this.scheduleOnce(function(){this.scheduleOnce(function(){var e=this;this.main.active=!0,this.scheduleOnce(function(){e.scheduleOnce(function(){cc.vv.gamelogic.isHelpToPlay>10&&e.HelpToPlay()},.6),e.scheduleOnce(function(){cc.find("UI_ROOT/Canvas/UI/rock/Layer").active=!1,window.noAD||e.ToGetBanner()},1)},.5),cc.log("0000>>"),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").LoadAni()},.8)},.3),this.schedule(this.getGameTime,1),this.isFirstTime=!1):(window.noAD||this.ToGetBanner(),cc.log("4>>"),(e=cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn")).scaleX=.001,e.scaleY=.001,e.runAction(cc.sequence(cc.delayTime(1.02),cc.scaleTo(.3,1).easing(cc.easeBackOut()))),this.bgNode.runAction(cc.moveTo(1,cc.v3(0,680))),this.gameMenu.runAction(cc.moveTo(1,cc.v3(0,1100))),this.node.runAction(cc.moveTo(1,cc.v3(0,375))),this.onRestartGame(),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!0,this.schedule(this.getGameTime,1)))},ToGetBanner:function(){cc.sys.isMobile&&(console.log("play banner !!!"),g_AD.playBannerAD())},onBtnPuse:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice);this.unschedule(this.getGameTime),window.clickPauseBtn++,cc.log("3>>"),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2").active=!0;var e=cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2");e.active=!0,e.runAction(cc.fadeIn(.5)),this.pauseNode.getChildByName("returnMenu").setScale(0),this.pauseNode.getChildByName("restart").setScale(0),this.pauseNode.getChildByName("volice").setScale(0);var c=cc.scaleTo(.25,1.2),t=cc.scaleTo(.1,1),n=cc.scaleTo(.37,1.2),o=cc.scaleTo(.18,1),i=n.clone(),a=o.clone(),r=n.clone(),s=o.clone();this.pauseNode.getChildByName("returnMenu").runAction(cc.sequence(n,o)),this.pauseNode.getChildByName("restart").runAction(cc.sequence(i,a)),this.pauseNode.getChildByName("volice").runAction(cc.sequence(r,s)),this.pauseNode.runAction(cc.sequence(c,t)),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!1,!window.noAD&&g_AD.getHaveFullScreen()&&this.isNetWork()&&(window.g_gameTime-window.g_fullAdTime>15||0==window.g_fullAdTime)&&(window.g_fullAdTime=window.g_gameTime,g_AD.playFullAD())},returnMenu:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),window.isOpenMusic&&(console.log("window.isOpenMusic"),cc.audioEngine.resume(cc.vv.AudioMgr.playBG)),this.playBtnAni(),window.g_gameTime=0,window.g_fullAdTime=0,window.isRelive=!1,window.isRecord=!1,this.bgNode.runAction(cc.moveTo(1,cc.v3(0,-280))),this.gameMenu.runAction(cc.moveTo(1,cc.v3(0,-15))),this.node.runAction(cc.moveTo(1,cc.v3(0,-800)));var e=cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2");e.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.active=!1}))),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").Reset(),this.pauseNode.runAction(cc.scaleTo(.3,0))},returnGame:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),window.isOpenMusic&&cc.audioEngine.resume(cc.vv.AudioMgr.playBG),this.schedule(this.getGameTime,1);var e=cc.callFunc(function(){cc.log("2222 >>"),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").runAction(cc.sequence(cc.delayTime(.1),cc.scaleTo(.3,1).easing(cc.easeBackOut())))}),c=cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2");c.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){c.active=!1}))),this.pauseNode.runAction(cc.sequence(cc.scaleTo(.3,0),e)),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!0},restart:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),window.isOpenMusic&&cc.audioEngine.resume(cc.vv.AudioMgr.playBG);var e=cc.callFunc(function(){cc.log("3333 >>"),cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").scale=.001,cc.find("UI_ROOT/Canvas/UI/rock/pauseBtn").runAction(cc.sequence(cc.delayTime(.1),cc.scaleTo(.3,1).easing(cc.easeBackOut())))}),c=cc.find("UI_ROOT/Canvas/UI/rock/pauseNodebg/bg2");c.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){c.active=!1}))),this.pauseNode.runAction(cc.sequence(cc.scaleTo(.3,0),cc.delayTime(1),e)),this.pauseNode.runAction(cc.delayTime(1)),this.onRestartGame(),cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").active=!0},voliceBtn:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice);var e=this.pauseNode.getChildByName("volice");1==this.BGM?(cc.vv.AudioMgr.VolIndex=0,cc.audioEngine.pause(cc.vv.AudioMgr.playBG),window.isOpenVoice=!1,console.log("\u97f3\u91cf\u5173"),e.getComponent(cc.Sprite).spriteFrame=this.volices[2],this.gameMenu.getChildByName("sound").getComponent(cc.Sprite).spriteFrame=this.volices[0],this.BGM=0,cc.vv.DataMgr.isOpenMusic=!1):(this.BGM=1,cc.vv.AudioMgr.VolIndex=1,cc.audioEngine.resume(cc.vv.AudioMgr.playBG),window.isOpenVoice=!0,console.log("\u97f3\u91cf\u5f00"),e.getComponent(cc.Sprite).spriteFrame=this.volices[3],this.gameMenu.getChildByName("sound").getComponent(cc.Sprite).spriteFrame=this.volices[1],cc.vv.DataMgr.isOpenMusic=!0)},onRestartGame:function(){cc.vv.AudioMgr.playKeySound(window.isOpenVoice),console.time("\u91cd\u65b0\u5237\u65b0\u8017\u8d39"),window.g_gameTime=0,window.g_fullAdTime=0,window.isRelive=!1,window.isRecord=!1,this.schedule(this.getGameTime,1);for(var e=0;e<cc.vv.DataMgr.EffectBoard.childrenCount;e++)cc.vv.DataMgr.EffectBoard.children[e].getChildByName("tishi").active=!1;cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").removeAllChildren();var c=cc.delayTime(.3),t=cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").getComponent("board").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects").Reset(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/particle").getComponent("particle").Reset(),cc.director.getScene().getChildByName("UI_ROOT").getChildByName("Canvas").getComponent("game").Resetscroe()}.bind(this)),n=cc.callFunc(function(){cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").init(),cc.find("UI_ROOT/Canvas/UI/rock/main/ground/Buttom").getComponent("buttom").LoadAni()}.bind(this)),o=cc.sequence(c,t,c,n);this.node.runAction(o),console.timeEnd("\u91cd\u65b0\u5237\u65b0\u8017\u8d39")},OnFiveStar:function(){console.log("OnFiveStar"),cc.vv.AudioMgr.playKeySound(window.isOpenVoice),cc.vv.gameCenter.fiveStar()},isNetWork:function(){if(cc.sys.os==cc.sys.OS_IOS){var e=jsb.reflection.callStaticMethod("ReachabilityEx","getNetworkTyp");return-1==Number(e)?(console.log("\u6ca1\u6709\u7f51\u7edc"),!1):(console.log("\u6709\u7f51\u7edc"),!0)}}}),cc._RF.pop()},{AudioMgr:"AudioMgr",DataMgr:"DataMgr",GameCenter:"GameCenter",gamelogic:"gamelogic",iap:"iap"}],iap:[function(e,c,t){"use strict";cc._RF.push(c,"70738nY3oNPmJfJ5drmqagO","iap"),window.mylog=console.log;var n={callback:function(e){mylog("iap call back not implement")},init:function(){if(!cc.sys.isMobile)return!1;mylog("iap init"),sdkbox.IAP.setDebug(!0),sdkbox.IAP.init(),this.refreshIAP()},setCallback:function(c){if(!cc.sys.isMobile)return!1;var t=this;sdkbox.IAP.setListener({onProductRequestSuccess:function(e){mylog("iap  refresh  Success \u68c0\u7d22\u6210\u529f"),t.callback("onProductRequestSuccess",e)},onProductRequestFailure:function(e){mylog("iap refresh fail \u68c0\u7d22\u5931\u8d25"),t.callback("onProductRequestFailure",e)},onSuccess:function(c){mylog("iap  bug onsuccess name= \u8d2d\u4e70\u6210\u529f"),mylog("\u8d2d\u4e70\u6210\u529f \u8fd4\u56de\u5bf9\u8c61"+c),t.callback("onBuy",c),e("ProxyAnalys").SendPurchaseEvent(c.id,c.name,c.priceValue,c.currencyCode)},onFailure:function(e,c){mylog("iap \u8d2d\u4e70\u5931\u8d25"),t.callback("onFailure",e,c)},onCanceled:function(e){mylog("iap onCanceled \u5982\u679c\u7528\u6237\u53d6\u6d88\u5219\u89e6\u53d1"),t.callback("onCanceled",e)},onRestored:function(e){mylog("iap onRestored \u6062\u590d\u8d2d\u4e70\u6210\u529f\u5219\u89e6\u53d1  \u53ef\u4ee5\u591a\u6b21\u89e6\u53d1"),t.callback("onRestored",e)},onRestoreComplete:function(e,c){mylog("iap onRestored \u6062\u590d\u8d2d\u4e70\u56de\u8c03"),t.callback("onRestoreComplete",e,c)},onShouldAddStorePayment:function(e){mylog(""),t.callback("onShouldAddStorePayment",e)},onFetchStorePromotionOrder:function(e,c){t.callback("onFetchStorePromotionOrder",e,c)},onFetchStorePromotionVisibility:function(e,c,n){t.callback("onFetchStorePromotionVisibility",e,c,n)},onUpdateStorePromotionOrder:function(e){t.callback("onUpdateStorePromotionOrder",e)},onUpdateStorePromotionVisibility:function(e){t.callback("onUpdateStorePromotionVisibility",e)}}),this.callback=c},refreshIAP:function(){if(!cc.sys.isMobile)return!1;sdkbox.IAP.refresh()},remove_ads:function(){if(!cc.sys.isMobile)return!1;sdkbox.IAP.purchase("remove_ads")},hint:function(){if(!cc.sys.isMobile)return!1;sdkbox.IAP.purchase("hint")},unlock:function(){if(!cc.sys.isMobile)return!1;sdkbox.IAP.purchase("unlock")},restore:function(){if(!cc.sys.isMobile)return!1;mylog("iap restore"),sdkbox.IAP.restore()}};c.exports=n,cc._RF.pop()},{ProxyAnalys:"ProxyAnalys"}],ironManager:[function(e,c,t){"use strict";cc._RF.push(c,"d31cbSczbhN57maJG6LHmZr","ironManager"),Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.adDisTime=15,this.isRemoveAd=!1,this.init()}return e.prototype.init=function(){cc.log("\u521d\u59cb\u5316ironSource"),this.IronSource=window.IronSource,this.isRemoveAd=cc.sys.localStorage.getItem("removeAD"),this.IronSource.init()},e.prototype.ShowRewardedVideo=function(e,c,t,n){this.IronSource.setRewardHandler(e,c,t,n),this.IronSource.showRewardVideoAD()},e.prototype.ShowInterstitial=function(e,c){this.getCanAd()&&(this.IronSource.setInterstitialHandler(e,c),this.IronSource.showFullScreenAD())},e.prototype.ShowBanner=function(){this.getCanAd()&&this.IronSource.showBanner()},e.prototype.HideBanner=function(){this.IronSource.hideBanner()},e.prototype.onRemoveAds=function(){this.HideBanner(),this.isRemoveAd=!0,cc.sys.localStorage.setItem("removeAD",!1)},e.prototype.getCanAd=function(){return!0},e.prototype.getCanVideo=function(){return this.IronSource.isRewardVideoAvailable()},e}();t.default=n,cc._RF.pop()},{}],loadManage:[function(e,c,t){"use strict";cc._RF.push(c,"02e8e81MDhMLoaHYEMlKisE","loadManage"),Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.loadRes=function(e,c,t){cc.loader.loadRes(e,c,function(e,c){e?cc.error(e.message):t(c)})},e.setImgByUrl=function(e,c,t){cc.loader.loadRes(c,cc.SpriteFrame,function(c,n){c?cc.error(c.message):(e.spriteFrame=n,t&&t())})},e.loadPrefab=function(e,c){cc.loader.loadRes(e,cc.Prefab,function(e,t){e?cc.error(e.message):c(t)})},e.loadPrefabStic=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(c){return[2,new Promise(function(c,t){cc.loader.loadRes(e,cc.Prefab,function(e,t){e?cc.error(e.message):c(t)})})]})})},e}();t.default=n,cc._RF.pop()},{}],loading:[function(e,c,t){"use strict";cc._RF.push(c,"d70f9e+OthDc44bzaYPWrs6","loading"),cc.Class({extends:cc.Component,properties:{loadSprite:cc.Sprite},start:function(){this.node.setPosition(cc.v2(0,0)),this.loadSprite.getComponent(cc.Sprite).fillRange=0,this.schedule(function(){this.loadSprite.getComponent(cc.Sprite).fillRange+=.045,this.loadSprite.getComponent(cc.Sprite).fillRange>=1&&this.node.destroy()},.04)}}),cc._RF.pop()},{}],particle:[function(e,c,t){"use strict";var n;cc._RF.push(c,"b8c6dMhDXxBp76298rWkBwm","particle"),cc.Class({extends:cc.Component,properties:(n={},n.RowNum=0,n.ColNum=0,n.singleBlockWidth=76,n.BlockEffect={default:null,type:cc.Prefab},n),init:function(){for(var e=[],c=this.ColNum,t=0;t<c;t++){var n={count:8,srcPos:cc.v3(0,0)};e.push(n)}var o=[];for(t=0;t<c;t++)for(var i=e[t].count,a=0;a<i;a++){var r=a*this.singleBlockWidth-266,s=266-t*this.singleBlockWidth,l=cc.v3(r,s);o.push(l)}for(t=0;t<o.length;t++){var d=cc.instantiate(this.BlockEffect);d.x=o[t].x,d.y=o[t].y,d.parent=this.node}cc.vv.DataMgr.ParticleBoard=this.node},GameResetDele:function(e,c){this.Colorindex=e,this.ClearOff=c,this.DeArr=c,this.FadeOutCount=0,this.scheduleOnce(function(){this.GameResetFadeOut()})},GameResetFadeOut:function(){for(var e=0;e<100;e++){if(this.FadeOutCount==this.ClearOff.length){if(this.FadeOutCount=0,e=101,cc.sys.garbageCollect(),null==cc.vv.gamelogic.isHelpToPlay)return;if(13==cc.vv.gamelogic.isHelpToPlay)for(e=0;e<cc.vv.DataMgr.EffectBoard.childrenCount;e++)cc.vv.DataMgr.LogicBoard.children[e].isHaveFK=!1;if(cc.vv.gamelogic.isHelpToPlay<=12)cc.vv.gamelogic.isHelpToPlay++;else if(null!=cc.vv.gamelogic.isHelpToPlay)return cc.vv.gamelogic.isHelpToPlay=null,void cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint").loadArea();return void this.scheduleOnce(function(){cc.find("UI_ROOT/Canvas").getComponent("game").HelpToPlay()},1)}var c=this.ClearOff[this.FadeOutCount],t=cc.vv.DataMgr.ParticleBoard.children[c].children[this.Colorindex];t.setScale(1),t.active=!0,t.children[1].getComponent(cc.ParticleSystem).resetSystem(),t.children[0].getComponent(cc.ParticleSystem).resetSystem(),this.FadeOutCount+=1}},DeleteDeal:function(e,c,t){this.Colorindex=c,this.ClearOff=e,this.DeArr=t,this.FadeOutCount=0,this.scheduleOnce(function(){this.schedule(this.FadeOutEffect,.03,this.ClearOff.length,0)}.bind(this),.3)},FadeOutEffect:function(){if(this.FadeOutCount!=this.ClearOff.length){for(t=0;t<this.ClearOff[this.FadeOutCount].length;t++){var e=this.ClearOff[this.FadeOutCount][t],c=cc.vv.DataMgr.ParticleBoard.children[e].children[this.Colorindex];c.setScale(1),c.active=!0,c.children[1].getComponent(cc.ParticleSystem).resetSystem(),c.children[0].getComponent(cc.ParticleSystem).resetSystem()}this.FadeOutCount+=1}else{if(this.FadeOutCount=0,null==cc.vv.gamelogic.isHelpToPlay)return;if(13==cc.vv.gamelogic.isHelpToPlay)for(var t=0;t<cc.vv.DataMgr.EffectBoard.childrenCount;t++)cc.vv.DataMgr.LogicBoard.children[t].isHaveFK=!1;if(cc.vv.gamelogic.isHelpToPlay<=12)cc.vv.gamelogic.isHelpToPlay++;else if(null!=cc.vv.gamelogic.isHelpToPlay)return cc.vv.gamelogic.isHelpToPlay=null,void cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint").loadArea();this.scheduleOnce(function(){cc.find("UI_ROOT/Canvas").getComponent("game").HelpToPlay()},1)}},Reset:function(){this.node&&cc.sys.garbageCollect()}}),cc._RF.pop()},{}],planOne:[function(e,c,t){"use strict";cc._RF.push(c,"f1815gVHI9C+KcmpHL6JgKE","planOne"),Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=n.property,a=function(e){function c(){var c=null!==e&&e.apply(this,arguments)||this;return c.X=null,c.Y=null,c.worldP=null,c.hasCub=null,c.tipNode=null,c}return __extends(c,e),c.prototype.init=function(e,c){var t=this;this.X=e,this.Y=c,this.scheduleOnce(function(){t.worldP=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO)})},c.prototype.checkPosIsOk=function(e){var c=Math.abs(this.worldP.x-e.x)<.5*this.node.width*.6,t=Math.abs(this.worldP.y-e.y)<.5*this.node.height*.6,n=null==this.hasCub;return c&&t&&n},c.prototype.onTip=function(e){this.tipNode.getComponent(cc.Sprite).spriteFrame=e,this.tipNode.active=!0},c.prototype.onUnTip=function(){this.tipNode.active=!1},__decorate([i(cc.Node)],c.prototype,"tipNode",void 0),c=__decorate([o],c)}(cc.Component);t.default=a,cc._RF.pop()},{}],sdkmanager:[function(e,c,t){"use strict";cc._RF.push(c,"208b1dsY3FJ7pFvJCplQiDx","sdkmanager");var n=e("../ironSource/ironManager").default,o={ads:{},ironsourceManage:{},callback:null,noRewardCb:null,showFullScreenAD:function(){this.ironsourceManage.ShowInterstitial()},cacheFullScreenAD:function(){},showRewardVideoAD:function(){this.ironsourceManage.ShowRewardedVideo(this.callback,this.noRewardCb)},cacheRewardVideoAD:function(){},checkADs:function(){},showBanner:function(){if(!cc.sys.isMobile)return!1;this.ironsourceManage.ShowBanner()},isFullScreenAvailable:function(){return!!cc.sys.isMobile},isRewardVideoAvailable:function(){return!!cc.sys.isMobile&&this.ironsourceManage.IronSource.isRewardVideoAvailable()},isBannerAvailable:function(){return!!cc.sys.isMobile},hideBanner:function(){cc.sys.isMobile&&this.ironsourceManage.HideBanner()},setCallback:function(e,c){this.callback=e,this.noRewardCb=c},init:function(){mylog("init sdkmanager"),this.ironsourceManage=new n,sdkbox.PluginFacebook&&(console.log("\u521d\u59cb\u5316Facebook"),sdkbox.PluginFacebook.init())}};c.exports=o,cc._RF.pop()},{"../ironSource/ironManager":"ironManager"}],shape:[function(e,c,t){"use strict";cc._RF.push(c,"fdc26xPbR9GALyrhoJDH6M3","shape");cc.Class({extends:cc.Component,properties:{singleBlockFrame:{type:cc.SpriteFrame,default:[]},width:0,shadowPng:{type:cc.SpriteFrame,default:null},allshape:{type:cc.Prefab,default:[]},Box:cc.Prefab,_touchStart:!1},onLoad:function(){var e=this.CreateShape();e.setScale(.45),this.node.addChild(e),this.addTouchEvent(),this.effects=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/effects").getComponent("effects");var c=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/groundframe");this.boundingBox=c.getBoundingBox()},CreateShape:function(){var e=15,c=parseInt(cc.find("UI_ROOT/Canvas/UI/rock/score").getChildByName("presentNum").getComponent(cc.Label).string);c>500&&(e=18);var t=cc.vv.gamelogic.random(1,e);if(c<200)switch(t){case 7:t=3;break;case 13:t=9;break;case 14:t=15;break;case 11:t=18;break;case 3:t=2}if(cc.vv.gamelogic.isHelpToPlay>10)switch(cc.vv.gamelogic.isHelpToPlay){case 11:case 12:t=5;break;case 13:t=12}var n=cc.find("UI_ROOT/Canvas/ResourceHold/Shape"),o=cc.instantiate(n.getChildByName(""+t)),i=n.getChildByName(""+t),a=cc.instantiate(i);a.removeAllChildren(),this.Colorindex=cc.vv.gamelogic.random(0,4);for(var r=this.singleBlockFrame[this.Colorindex],s=0;s<o.childrenCount;s++){var l=cc.instantiate(this.Box);l.position=o.children[s].position,l.getChildByName("singlebox").getComponent(cc.Sprite).spriteFrame=r,l.getChildByName("singlebox").selfTag=this.Colorindex,l.getChildByName("singlebox").active=!0,l.getChildByName("shadow").active=!0,l.name="singleBlock",l.parent=a}return a},GameShapeLife:function(){this.checkFrameList=[];for(var e=this.node.getChildByName("shape").children,c=0;c<e.length;c++){var t=this.pAdd(cc.v3(this.node.getChildByName("shape").x,this.node.getChildByName("shape").y),cc.v3(e[c].x,e[c].y)),n=this.pAdd(this.node.position,t),o=this.checkPos(n);o&&(this.checkFrameList.push(o),this.checkFKlist.push(e[c]))}},pAdd:function(e,c){return e.add(c)},pDistance:function(e,c){return e.sub(c).mag()},collisionFunc:function(){this.checkFrameList=[],this.checkFKlist=[],this.moveArr1=[],this.moveArr2=[];for(var e=this.node.getChildByName("shape").children,c=0;c<e.length;c++){var t=this.pAdd(cc.v3(this.node.getChildByName("shape").x,this.node.getChildByName("shape").y),cc.v3(e[c].x,e[c].y)),n=this.pAdd(this.node.position,t),o=this.checkPos(n);o&&(this.checkFrameList.push(o),this.checkFKlist.push(e[c]),this.moveArr1.push(t),this.moveArr2.push(n),o.dis)}},checkPos:function(e){for(var c=0;c<cc.vv.DataMgr.LogicBoard.childrenCount;c++){var t=cc.vv.DataMgr.LogicBoard.children[c],n=this.pDistance(cc.v3(t.x,t.y),e);if(n<=50)return t.dis=n,t}},dropDown:function(){if(!this.checkIsCanDrop())return cc.vv.AudioMgr.playDrop2(window.isOpenVoice),void this.BackToHome();this.node.stopAllActions();var e=this.checkFrameList[0].getPosition(),c=this.moveArr2[0].x,t=this.moveArr2[0].y,n=cc.v3(e.x-c,e.y-t),o=[],i=[],a=cc.callFunc(function(){for(var e=0;e<this.node.getChildByName("shape").childrenCount;e++)this.node.getChildByName("shape").children[e].setScale(1)}.bind(this));cc.vv.AudioMgr.playDrop1(window.isOpenVoice);var r=cc.callFunc(function(){for(var e=0;e<this.checkFKlist.length;e++)this.checkFKlist[e].x=0,this.checkFKlist[e].y=0,this.checkFrameList[e].isHaveFK||(this.checkFKlist[e].parent=this.checkFrameList[e],this.checkFrameList[e].active=!1,o.push(this.checkFrameList[e].getPosition()),i.push(this.checkFrameList[e].getPosition()),this.checkFrameList[e].isHaveFK=!0);this.DropDownCorol=this.effects.DropDownCorol(this.Colorindex,o),cc.vv.gamelogic.CountScore(1)}.bind(this)),s=cc.callFunc(function(){this.DropDownCorol&&(cc.vv.gamelogic.isdeling=cc.vv.gamelogic.FirstDelete(i,this.Colorindex,this.node.position),this.node.removeFromParent(),11!=cc.vv.gamelogic.isHelpToPlay&&12!=cc.vv.gamelogic.isHelpToPlay&&13!=cc.vv.gamelogic.isHelpToPlay&&(cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint").loadArea(),this.node.destroy()))}.bind(this)),l=cc.moveBy(.1,n),d=cc.spawn(l,a),u=cc.sequence(d,r,s);this.node.runAction(u)},takeBack:function(){this.BackToHome()},checkIsCanDrop:function(){if(!this.checkFrameList)return!1;if(null==this.checkFrameList.length)return!1;if(0==this.checkFrameList.length||this.checkFrameList.length!=this.node.getChildByName("shape").children.length)return!1;for(var e=0;e<this.checkFrameList.length;e++)if(this.checkFrameList[e].isHaveFK){var c=this.node.getChildByName("shape");for(e=0;e<c.childrenCount&&!c.children[e].getChildByName("shadow");e++);return!1}for(c=this.node.getChildByName("shape"),e=0;e<c.childrenCount;e++){var t=c.children[e].convertToWorldSpaceAR(cc.v2(0,0)),n=cc.find("UI_ROOT/Canvas/UI/rock/main/ground/board").convertToNodeSpaceAR(t);if(n.x<-288||n.x>288||n.y>288||n.y<-288)return!1}return this.node.getChildByName("shape").opacity=255,!0},changeColorDeal:function(e){for(var c=[],t=0;t<this.checkFrameList.length;t++){c.push(this.checkFrameList[t].getPosition());var n=this.node,o=this.Colorindex}if(null!=(n=this.effects.MoveColorDeal(e,c,o))&&0!=n){for(t=0;t<this.node.getChildByName("shape").childrenCount;t++)this.node.getChildByName("shape").children[t].setScale(1);for(t=0;t<n.length;t++)for(var i=0;i<this.checkFrameList.length;i++)n[t].x==this.checkFrameList[i].x&&n[t].y==this.checkFrameList[i].y&&this.node.getChildByName("shape").children[i].setScale(1)}else for(t=0;t<this.node.getChildByName("shape").childrenCount;t++)this.node.getChildByName("shape").children[t].setScale(1)},checkIsLose:function(){for(var e=[],c=0;c<cc.vv.DataMgr.EffectBoard.childrenCount;c++)cc.vv.DataMgr.EffectBoard.children[c].getChildByName("tishi").active=!1;var t=cc.vv.DataMgr.LogicBoard,n=0,o=this.node.getChildByName("shape").children,i=[];for(c=0;c<t.childrenCount;c++){var a=t.children[c],r=cc.v3(a.x,a.y),s=0;if(!a.isHaveFK){for(var l=[],d=0;d<o.length;d++)for(var u=this.pAdd(r,cc.v3(o[d].x,o[d].y)),h=0;h<t.childrenCount;h++){var g=t.children[h];this.pDistance(cc.v3(g.x,g.y),u)<=38&&!g.isHaveFK&&(s++,l.push(h))}s==o.length?n++:l=[],l.length>0&&i.push(l)}}if(1==i.length)for(c=0;c<i.length;c++)for(d=0;d<i[c].length;d++)e.push(i[c][d]);if(e.length>0&&1==cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").childrenCount)for(c=0;c<e.length;c++)cc.vv.DataMgr.EffectBoard.children[e[c]].getChildByName("tishi").active=!0,cc.vv.DataMgr.EffectBoard.children[e[c]].getChildByName("tishi").getComponent(cc.Animation).play("tishi");return 0==n},addTouchEvent:function(){cc.vv.gamelogic.isChange=!1,this.node.on(cc.Node.EventType.TOUCH_START,function(e){return this.onStart(e),!0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.onMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.__OnTouchEnd(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.__OnTouchEnd(e)},this)},TryDirIsPause:function(){},onStart:function(e){if(!window.isTouchStart&&!window.isBackAction){this._touchStart=!0,window.isTouchStart=!0,cc.vv.AudioMgr.playChoose(window.isOpenVoice),this.node.zIndex=10,this.tishiArr=[];for(var c=0;c<cc.vv.DataMgr.EffectBoard.childrenCount;c++)1==cc.vv.DataMgr.EffectBoard.children[c].getChildByName("tishi").active&&(this.tishiArr.push(c),cc.vv.DataMgr.EffectBoard.children[c].getChildByName("tishi").active=!1,cc.vv.DataMgr.EffectBoard.children[c].getChildByName("tishi").getComponent(cc.Animation).stop("tishi"));var t=e.touch.getStartLocation().y-cc.vv.gamelogic.WinSize/2-this.node.y+200;cc.vv.gamelogic.isPad&&(t=100),this.shapeMove(t),this.startPos=e.touch.getStartLocation()}},onMove:function(e){if(this._touchStart&&!window.isBackAction){var c=e.touch.getDelta();this.node.x+=c.x,this.node.y+=c.y,this.collisionFunc(),this.checkIsCanDrop()?this.changeColorDeal():this.changeColorDeal(!0)}},__OnTouchEnd:function(e){if(this._touchStart&&!window.isBackAction){if(this._touchStart=!1,window.isTouchStart=!1,this.tishiArr.length>0)for(var c=0;c<this.tishiArr.length;c++)cc.vv.DataMgr.EffectBoard.children[this.tishiArr[c]].getChildByName("tishi").active=!0,cc.vv.DataMgr.EffectBoard.children[this.tishiArr[c]].getChildByName("tishi").getComponent(cc.Animation).play("tishi");var t=cc.v3(e.touch.getLocation().x-320,e.touch.getLocation().y-cc.vv.gamelogic.WinSize/2);this.dropDown(t)}},shapeMove:function(e){var c=this.node.getChildByName("shape");c.zIndex=10;var t=cc.callFunc(function(){c.runAction(cc.scaleTo(.04,1,1));for(var e=0;e<c.childrenCount;e++)c.children[e].setScale(1)}),n=cc.spawn(cc.moveBy(.04,cc.v3(0,e)),t);this.node.runAction(n)},BackToHome:function(){window.isBackAction=!0,this.scheduleOnce(function(){var e,c=this.node.getChildByName("shape");switch(this.node.selfTag){case 0:e=cc.v3(-185,-415);break;case 1:e=cc.v3(0,-415);break;case 2:e=cc.v3(185,-415)}11!=cc.vv.gamelogic.isHelpToPlay&&12!=cc.vv.gamelogic.isHelpToPlay&&13!=cc.vv.gamelogic.isHelpToPlay||(e=cc.v3(0,-405));for(var t=this.pDistance(this.node.position,e)/2e3,n=0;n<c.childrenCount;n++)c.children[n].setScale(1);var o=cc.callFunc(function(){c.runAction(cc.sequence(cc.scaleTo(t,.45,.45),cc.callFunc(function(){window.isTouchStart=!1,window.isBackAction=!1})))}),i=cc.spawn(cc.moveTo(t,e),o);this.node.runAction(i)},.04)},DealMulityEventListener:function(){cc.Node.maxTouchNum=1,cc.Node.touchNum=0;var e=cc.Node.prototype.dispatchEvent;cc.Node.prototype.dispatchEvent=function(c){switch(c.type){case"touchstart":cc.Node.touchNum<cc.Node.maxTouchNum&&(cc.Node.touchNum++,this._canTouch=!0,e.call(this,c));break;case"touchmove":!this._canTouch&&cc.Node.touchNum<cc.Node.maxTouchNum&&(this._canTouch=!0,cc.Node.touchNum++),this._canTouch&&e.call(this,c);break;case"touchend":case"touchcancel":this._canTouch&&(this._canTouch=!1,cc.Node.touchNum--,e.call(this,c));break;default:e.call(this,c)}}},showBombAction:function(){var e;if((this.isNetWork()||!cc.sys.isMobile)&&!(e="BombBtn"==this.node.children[0].name?this.node.children[0]:this.node.children[1]).active){console.log("ShowBomb"),e.children[0].setScale(0,0),e.children[1].setScale(0,0),e.children[0].runAction(cc.scaleTo(.4,.5).easing(cc.easeBackOut()));var c=cc.scaleTo(.5,.4),t=cc.scaleTo(.5,.5);e.active=!0;var n=cc.repeatForever(cc.sequence(t,c));e.children[1].runAction(n)}},closeBombAction:function(){var e;!this.isNetWork()&&cc.sys.isMobile||(e="BombBtn"==this.node.children[0].name?this.node.children[0]:this.node.children[1]).active&&(console.log("CloseBomb"),e.active=!1,e.children[0].stopAllActions(),e.children[1].stopAllActions())},OnBombButtonClick:function(){var e=this;if(!cc.sys.isMobile){var c,t;"BombBtn"==this.node.children[0].name?(c=this.node.children[0],t=this.node.children[1]):(c=this.node.children[1],t=this.node.children[0]),c.children[0].active=!1,c.children[1].active=!1,t.active=!1,c.children[2].active=!0,cc.vv.AudioMgr.playElimi(window.isOpenVoice),c.children[2].children[this.Colorindex].active=!0;var n=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.node.parent.parent.convertToNodeSpaceAR(n);this.node.parent=this.node.parent.parent,this.node.position=o,cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint").loadArea(),this.scheduleOnce(function(){e.node.destroy()},2)}g_AD.bindCallBack(this.callback_video.bind(this)),g_AD.playRewardVideoAD()},callback_video:function(e,c){var t,n,o=this;console.log("Reward Callback"),"BombBtn"==this.node.children[0].name?(t=this.node.children[0],n=this.node.children[1]):(t=this.node.children[1],n=this.node.children[0]),t.children[0].active=!1,t.children[1].active=!1,n.active=!1,t.children[2].active=!0,cc.vv.AudioMgr.playElimi(window.isOpenVoice),t.children[2].children[this.Colorindex].active=!0;var i=this.node.parent.convertToWorldSpaceAR(this.node.position),a=this.node.parent.parent.convertToNodeSpaceAR(i);this.node.parent=this.node.parent.parent,this.node.position=a,cc.find("UI_ROOT/Canvas/UI/rock/main/BornPoint").getComponent("BornPoint").loadArea(),this.scheduleOnce(function(){o.node.destroy()},2)},isNetWork:function(){if(cc.sys.os==cc.sys.OS_IOS){var e=jsb.reflection.callStaticMethod("ReachabilityEx","getNetworkTyp");return-1==Number(e)?(console.log("\u6ca1\u6709\u7f51\u7edc"),!1):(console.log("\u6709\u7f51\u7edc"),!0)}}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,c,t){"use strict";cc._RF.push(c,"993c8r+aDJKpoR1LGE3xb/G","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","AD","ProxyAnalys","sdkmanager","AudioMgr","BornPoint","DataMgr","GameCenter","Prompt","board","buttom","button","effects","game","gamelogic","gameover","iap","IronSource","ironManager","loadManage","loading","controlBox","cubeOne","cubePile","gameManage","planOne","particle","shape"]);